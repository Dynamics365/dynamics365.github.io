<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>LCS API Database Movement with Power Automate | Dynamics 365 Finance Operations & Power Platform</title><meta name=keywords content="Power Automate,ALM,LCS API,Database Movement"><meta name=description content="Hello Dynamics & Power Community,
I’m very happy to announce a good news for you the Dynamics365 F&O Community. I’ve got a little gift for you, as part of the new LCS API.
If you were, like me as an AX 2012 or F&O Technical/Architect Consultant, you probably already suffered from not being able to offer customers the ability to automatically refresh your database from one environment to other. Of course, you could do it via scripts, powershell (but really complicated for LCS and F&O : see even impossible), but finally doing it by code actually…."><meta name=author content="Me"><link rel=canonical href=https://nuxulu.com/2021-05-05-lcs-api-database-movement-with-powerautomate/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link href=/assets/css/stylesheet.min.746a86b58bb2b052b5e4df8216510494f04f81e62c08d626150c26c69ca929da.css integrity="sha256-dGqGtYuysFK15N+CFlEElPBPgeYsCNYmFQwmxpypKdo=" rel="preload stylesheet" as=style><link rel=icon href=https://nuxulu.com/%7B%7Bsite.url%7D%7D/><link rel=icon type=image/png sizes=16x16 href=https://nuxulu.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://nuxulu.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://nuxulu.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://nuxulu.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-123-45','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property="og:title" content="LCS API Database Movement with Power Automate"><meta property="og:description" content="Hello Dynamics & Power Community,
I’m very happy to announce a good news for you the Dynamics365 F&O Community. I’ve got a little gift for you, as part of the new LCS API.
If you were, like me as an AX 2012 or F&O Technical/Architect Consultant, you probably already suffered from not being able to offer customers the ability to automatically refresh your database from one environment to other. Of course, you could do it via scripts, powershell (but really complicated for LCS and F&O : see even impossible), but finally doing it by code actually…."><meta property="og:type" content="article"><meta property="og:url" content="https://nuxulu.com/2021-05-05-lcs-api-database-movement-with-powerautomate/"><meta property="og:image" content="https://nuxulu.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content><meta property="og:site_name" content="Dynamics 365 Finance Operations & Power Platform"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nuxulu.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="LCS API Database Movement with Power Automate"><meta name=twitter:description content="Hello Dynamics & Power Community,
I’m very happy to announce a good news for you the Dynamics365 F&O Community. I’ve got a little gift for you, as part of the new LCS API.
If you were, like me as an AX 2012 or F&O Technical/Architect Consultant, you probably already suffered from not being able to offer customers the ability to automatically refresh your database from one environment to other. Of course, you could do it via scripts, powershell (but really complicated for LCS and F&O : see even impossible), but finally doing it by code actually…."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"LCS API Database Movement with Power Automate","item":"https://nuxulu.com/2021-05-05-lcs-api-database-movement-with-powerautomate/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"LCS API Database Movement with Power Automate","name":"LCS API Database Movement with Power Automate","description":"Hello Dynamics \u0026amp; Power Community,\nI’m very happy to announce a good news for you the Dynamics365 F\u0026amp;O Community. I’ve got a little gift for you, as part of the new LCS API.\nIf you were, like me as an AX 2012 or F\u0026amp;O Technical/Architect Consultant, you probably already suffered from not being able to offer customers the ability to automatically refresh your database from one environment to other. Of course, you could do it via scripts, powershell (but really complicated for LCS and F\u0026amp;O : see even impossible), but finally doing it by code actually….","keywords":["Power Automate","ALM","LCS API","Database Movement"],"articleBody":"Hello Dynamics \u0026 Power Community,\nI’m very happy to announce a good news for you the Dynamics365 F\u0026O Community. I’ve got a little gift for you, as part of the new LCS API.\nIf you were, like me as an AX 2012 or F\u0026O Technical/Architect Consultant, you probably already suffered from not being able to offer customers the ability to automatically refresh your database from one environment to other. Of course, you could do it via scripts, powershell (but really complicated for LCS and F\u0026O : see even impossible), but finally doing it by code actually…. and here I will show you the benefit of the PowerAutomate / Flow to refresh automatically your F\u0026O production instance to an UAT instance, without any line of code !\nI will provide you, the How-To setup here in this article (step-by-step), also 3 samples of my GitHub account for PowerAutomate flow.\nHope you will like it, and feel free to share it :)\n![LCS_API_DatabaseMovement.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/LCS_API_DatabaseMovement.png)\nSo…. how to start :)\nFirst of all, here is a quick summary of the new API for LCS - in Dynamics 365 F\u0026O.\nLike you know, we were not able to perform automatic Database movement in the past. We get only to an Azure Marketplace a flow between Azure DevOps release pipeline in order to upload your BUILD package and also setup an automatic deployment. It was the very beginning to perform great automatic release pipelines : like me, deploying every night for customers a recent package in our TEST environments every night after BUILD completed.\nDatabase movement operations are a suite of self-service actions that can be used as part of Data Application Lifecycle Management (also referred to as DataALM). These actions provide structured processes for common implementation scenarios such as golden configuration promotion, debugging/diagnostics, destructive testing, and general refresh for training purposes.\nIn this topic, you will learn how to use database movement operations to perform refresh, export, import, and various flavors of point-in-time restore.\nAt the time, I write this article, the LCS API have only 4 methods but I hope Microsoft will add soon more methods and of course I will share that with you depending on which and when it will be possible.\nWe can perform the following operations through the RESTful API:\n  List DB backups for an LCS project.\n  Create a DB refresh between two environments (only Prod and Sandbox environments, like we can do in LCS).\n  Get an ongoing operation status.\n  Quick feedbacks for Microsoft : we really need to add also monitoring KPI stuff methods in order to get the DTU SQL Percentage Live for production or other stuff like that, in order to not connect every time in the LCS Portal and check if everything looks good : to be proactive in fact / and maybe also restart service etc… : but yep I maybe ask a lot, it’s a good start now that this API is open, so I know that Microsoft will bring this API even better this year !\nMicrosoft Documentation - LCS API\n First, you will need to create an Azure AAD in order to connect to the LCS API.\nYou can go here for the How-To setup :\nhttps://docs.microsoft.com/en-us/dynamics365/fin-ops-core/dev-itpro/database/api/dbmovement-api-authentication\nDon’t forget to copy somewhere your ClientID : ApplicationID and also to generate a ClientSecret. Also don’t forget to put the Dynamics Lifecycle Services like below as a Delegated access, with Grant Admin permission.\n![Screenshot 2020-04-14_21-57-02-177.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_21-57-02-177.png)\nSo, now you have the access to call the LCS API, and you can authenticate to it. But maybe, like me, if you had in the past configure the AzureDevOps release pipeline process to connect to LCS, you had maybe already an App Registration in your Azure AD, so you can keep it and reuse for this purpose.\n Just for your information, It was not possible to create directly for you Custom Connectors in PowerAutomate in order to deploy it more easily. Since the LCS API use at the moment a strange and old school authentification. Hope I can share that when OAuth 2.0 will be used for this API !). But these samples will be enough and easy to configure, trust me !\nNow, you can get my PowerAutomate / Flow samples directly in my Github Account :\nDownload all the 3 ZipFiles\nALM LCS PowerAutomate Samples - Github\nAfter, you can go to your PowerAutomate account. I know that partners/customers in FinOps are not (yet ?) going very much in there, but still, I hope I will help you to discover this fantastic feature in the PowerPlatform ! And yes, normally (like me), if you had bought your F\u0026O licences, you have already a free account for every users, and it will be more than enough to setup some flows like this one.\nhttps://flow.microsoft.com\nGo, to “My Flows” in order to import it.\n![Screenshot 2020-04-14_22-13-04-870.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-13-04-870.png)\nSelect my ZIP file from my Github,\n![Screenshot 2020-04-14_22-17-15-902.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-17-15-902.png)\nHere, don’t be afraid for the 2 resources / connectors (Mail \u0026 Push mobile notification) you can setup it before importing or just map to your connectors if you had already setup for other flows before. I just used them in order to give you some example of actions, you can delete them after import process.\nWhen you have done all done 3 imports of the sample, let’s go in 1 by 1 if you don’t mind !\n  1. PowerAutomate Sample - LCS API - Automatic refresh database   ![Screenshot 2020-04-14_22-26-41-946.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-26-41-946.png)\nIf you go in, I will explain step-by-step in order to configure it and also give inputs why I’ve done that :)\nClick on “EDIT” button.\nHere is below the whole flow, without any line of code :)\n![Screenshot 2020-04-14_22-27-54-950.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-27-54-950.png)\nSo, first step, since it’s a scheduled flow in my example, I can setup when my flow will run. Here I have put every weedays at 7 p.m but sure you can edit it of course. Keep in mind, that you can of course do it by a trigger from other connector in PowerAutomate. Like maybe do it after an Azure DevOps Pipeline is finished or after a BUILD process, after also an approval by someone else in Microsoft Teams in adaptive card, by a click in a button in a PowerApps : well, I can give 150 examples so you can setup like you want !\nJust be careful also on the interval, you can setup only 3 refresh in a day for 1 target environment ! (limitation by LCS)\n![Screenshot 2020-04-14_22-33-15-144.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-33-15-144.png)\nAfter I just create a variable to put your LCS project ID. Of course, change the value in it to reflect your current LCS project.\nYou can grab it directly in your LCS portal if you don’t know it\n![Screenshot 2020-04-14_22-36-00-492.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-36-00-492.png)\n![Screenshot 2020-04-14_22-36-59-170.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-36-59-170.png)\nAfter, I use the HTTP connector to perform the authentification with of course your Azure Application ID and Secret token that you have created earlier.\n![Screenshot 2020-04-14_22-41-22-394.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-41-22-394.png)\nYou will need here only to change the values of : username, password, clientid and clientsecret.\nKeep the resource and grant_type like this, as it is. Don’t change the Content-Type of the header.\nOne more thing : don’t use an LCS account that of course doesn’t have access and have appropriate security role. And like me, don’t use an account that has a MFA account (Multi Factor Authentification), use like an administrator/service account.\nAfter I just use the Parse JSON feature, in order to get the object of the response. The most important thing is the property : Access_Token\nIt will be used after for every call to the LCS API, in the header, you will see :)\nKeep in mind that the Token is for 1 hour of expiration !! So don’t forget to refresh your call to authenticate after 1 hour if you need to !\n![Screenshot 2020-04-14_22-44-33-225.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-44-33-225.png)\nAfter I have created 2 more variables : the source \u0026 target environment of your LCS environments that you want to refresh database. Of course, change by your need !\n![Screenshot 2020-04-14_22-51-43-762.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-51-43-762.png)\nAs a reminder, you can get the Environment ID by going in more details of LCS.\n![Screenshot 2020-04-14_22-49-46-630.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-49-46-630.png)\nFinally I call the LCS API to refresh the database, like this :\nHere you don’t have to change anything, good right ? :)\nBut, I want to explain the Authorization header. It’s here that we put the Access_Token of the response after authentification.\nIt’s like : Bearer xxxxxxxxxxxxxxxxx_veryhugemassive_token\nThe space key is mandatory, so don’t forget it !\nOf course at the end, I add it also a Parse JSON to build the object response of the API.\n![Screenshot 2020-04-14_22-52-53-666.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-52-53-666.png)\nAfter, I added a conditional split. Of course, the purpose is to achieve a different path in the Flow, if the response is OK or not…\n![Screenshot 2020-04-14_22-56-40-282.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-56-40-282.png)\nIn my “not success path”, I just put a Push Mobile Notification Action, but it’s just an example of course. You can change it by whatever you like. Don’t forget you have now more than 300 connectors in PowerAutomate (Microsoft and other third-party apps !)\n![Screenshot 2020-04-14_22-58-57-340.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-58-57-340.png)\nOn my “success path”, here is for me the most important feature !\nFirst step here, I wait for 1 hour, magic no ? but why ? Well because, we don’t have to call LCS API to fetch the status of the current activity of the database refresh until more than 1 hour. Like me, it takes 1hour30min and sometimes maybe 2 hours to finish all the refresh. But you change it of course by adding just 30 minutes of wait if you had experience faster refresh on your side ! It’s also for me a good example to show you that we can put Expression without to be a massive developper !\n![Screenshot 2020-04-14_23-00-18-825.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-00-18-825.png)\nAfter I’ve done a Do Until feature, in order to call every 5 minutes the LCS API to fetch the status. In order to after doing some actions in the same flow.\nThe end of my “while'“ loop is until we’ve got a Status Operation than is not equal to : In Progress. Just be careful of the Change Limits here, you have to increase it to 300 like me, because by default it’s 60 : that’s say that we will only do this part for 60 minutes. But I already do that for you :)\nUpdate (17/04/20) : Just found that you can also increase the timeout of the Do Until statement. By default it’s PT1H , you can change by PT2H for 2 hours or more if you need.\n![Screenshot 2020-04-14_23-04-57-449.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-04-57-449.png)\nAfter, I just fetch the status of the Operation/Activity of the database refresh to know if it’s finished :) Parsing JSON again of course, every time in fact so I hope you are now familiar with that.\n![Screenshot 2020-04-14_23-05-29-692.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-05-29-692.png)\nAnd now, when it’s ended, why I’ve done that ? Well because on my side (and I think you also), you have some “Post-Refresh” statement - script or SQL script to achieve. As you know, after a refresh database, you have all BatchJobs On Hold, only 1 user access activated, and you want maybe to change some parameter to reflect the change and of course don’t activate the Email distributor batch to sent email to a customer from an UAT Instance… believe me I’ve seen that many times !\nSo that’s why I’ve put this last step here and will explain more deeper with just a small part of X++ code for AX Technical guys.\n![Screenshot 2020-04-14_23-12-48-036.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-12-48-036.png)\nIn fact, it was not possible for me to give you a sample of the Dyn365 F\u0026O connector to share it (without giving my credentials) directly in this sample, so you will need to do it yourself for this part.\nSo, of course you will erase this part of sending email after completion, it’s irrelevant. You already receive an email from LCS when the refresh is done.\nFirst, you can of course add other actions if you want to, like I’ve said before you have 300 connectors so you can put something else.\nBut for me, you will change by that !! The Dynamics 365 FinOps connector in order to call Action / in fact it’s like a job in AX. It refers to the methods applied to a data entity.\nCreate a new step like that by choosing the right connector. You will notice that you have multiple actions. Here you can see that for other Flow/PowerAutomate you can achieve more : by creating, updating, retrieving records etc…. so for other use cases, you can have a look !\n![Screenshot 2020-04-14_23-18-07-784.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-18-07-784.png)\nHere, I will pick “Execute Action” :\n![Screenshot 2020-04-14_23-20-21-574.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-20-21-574.png)\nBut, like me, my question was : “What the hell are coming from these actions ???”\nSee the documentation of the connector F\u0026O :\nLearn more\nLike I said, it’s coming from Methods in the Data Entities in F\u0026O. So like I’ve done below, you can create a custom one, and create method that in fact will do of course your post-refresh database script. Like me, it was done for reactivate all users, batchjobs. But sure, you can do it depending on your needs !\n Just as a reminder, don’t forget to use the connector F\u0026O with the Environment Manager that have access after a database refresh !  So just create a new Data entity, that refer to whatever table coming from AX like that :\n![Screenshot 2020-04-14_23-24-55-272.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-24-55-272.png)\nCreate your methods, that refer to SysODataActionAttribute.\nHere I don’t give a response (void) but you can of course also put some object if you need to get back to PowerAutomate flow.\n![Screenshot 2020-04-14_23-25-11-005.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-25-11-005.png)\nHere we are, finished for this first sample.\n 2. LCS API - Export database   You already know that we can export database also on the LCS Portal by manual action on a Sandbox instance. Of course, it can be good to do it like just after our previous sample because we have done a flow (DataALM) to refresh the production to an UAT instance. If you want to get the .bacpac (backup of SQL Azure) in order to deploy it (implied your production database) to a DEV environment. Maybe also because you want to archive it to a safe repository. So yes, the LCS API has already a method for that, that’s why I made this sample for you.\nI assume that you have already download it from my GitHub Account before and already import it like the previous one.\nGo in this flow.\nI will not explain again this part, because it’s exactly the same as the Database Refresh.\n![Screenshot 2020-04-14_23-35-58-495.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-35-58-495.png)\nAfter, I made 2 variables : the backupName wanted and also the environmentId that you want to export the database.\n![Screenshot 2020-04-14_23-36-59-889.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-36-59-889.png)\nAfter, I call the LCS API and grab the response to a JSON object.\n![Screenshot 2020-04-14_23-38-25-516.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-38-25-516.png)\nFinally the conditional split, you can change like before by whatever you want.\n![Screenshot 2020-04-14_23-38-38-379.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-38-38-379.png)\n 3. Retrieve list of database backup   Here, we will have the possibility to retrieve the list of the whole backup list in your LCS Asset Library. As you know, it’s the default storage, where all database backup are coming.\n![Screenshot 2020-04-14_23-42-44-006.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-42-44-006.png)\nAt the end I’ve done a For Each feature, good way to show you this point !\n![Screenshot 2020-04-14_23-44-54-577.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-44-54-577.png)\nWell… sad news : true. Because I try to add also an another HTTP Connector for the FileLocation (it’s the HTTP location where you can download your backup) but the limitation is for 100MB so you will get like me an error. My aim was after to grab the fileContent to a OneDrive, Google Drive, Sharepoint or Azure Blob Storage, but yes… at this time we can’t.\nThe only way that I have for you, is to do it by a more complicated way. You can create a powershell script in your own network / share folder (onPremise). You can after download the Data Gateway for PowerAutomate in order to call your script, passing through the FileLocation and your Powershell will download it on your onPremise folder. Yes I didn’t talk about that, but yes we can achieve a connection from PowerAutomate (SaaS - Cloud Only) to connect on an onPremise API - Service.\n![on-premises-data-gateway.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/on-premises-data-gateway.png)\nPowerAutomate - Data Gateway onPremise\nPowerAutomate - Powershell onPremise\n To conclude : I hope you like it :) Besides that, feel free to contact me, comment, do feedbacks etc…\nYou can see easily that PowerAutomate in part of the PowerPlatform is really a huge feature that will help us in a lot of flows for F\u0026O project.\nBecause despite this technical part of DataALM, like I’ve done for other articles in this blog, we can achieve a lot more of use cases now ! Business cases , Business Events etc…\nSee you ! Stay tuned. Add me on social networks :)\n","wordCount":"3011","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nuxulu.com/2021-05-05-lcs-api-database-movement-with-powerautomate/"},"publisher":{"@type":"Organization","name":"Dynamics 365 Finance Operations \u0026 Power Platform","logo":{"@type":"ImageObject","url":"https://nuxulu.com/%7B%7Bsite.url%7D%7D/"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://nuxulu.com accesskey=h title="Dynamics 365 Finance Operations Archive (Alt + H)"><img src=/apple-touch-icon.png alt=logo aria-label=logo height=35>Dynamics 365 Finance Operations Archive</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://nuxulu.com/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://nuxulu.com/categories/ title=categories><span>categories</span></a></li><li><a href=https://nuxulu.com/tags/ title=tags><span>tags</span></a></li><li><a href=https://nuxulu.com/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://nuxulu.com>Home</a></div><h1 class=post-title>LCS API Database Movement with Power Automate</h1></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner></div></details></div><div class=post-content><p>Hello Dynamics & Power Community,</p><p>I’m very happy to announce a good news for you the Dynamics365 F&O Community. I’ve got a little gift for you, as part of the new LCS API.</p><p>If you were, like me as an AX 2012 or F&O Technical/Architect Consultant, you probably already suffered from not being able to offer customers the ability to automatically refresh your database from one environment to other. Of course, you could do it via scripts, powershell (but really complicated for LCS and F&O : see even impossible), but finally doing it by code actually…. and here I will show you the benefit of the PowerAutomate / Flow to refresh automatically your F&O production instance to an UAT instance, without any line of code !</p><p>I will provide you, the How-To setup here in this article (step-by-step), also 3 samples of my GitHub account for PowerAutomate flow.</p><p>Hope you will like it, and feel free to share it :)</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586893028903-NTI0IKAN11ZPW93WX7GP/ke17ZwdGBToddI8pDm48kB22_VvoyFCRbPbLc__z6BN7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0mCjggly5cZuu_YqpnrzBi6yTqBkwjrVCaBTX1Yp4Xgg6k6KMOdln3GErxXMetT4lA/LCS_API_DatabaseMovement.png alt=LCS_API_DatabaseMovement.png></p><p>![LCS_API_DatabaseMovement.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/LCS_API_DatabaseMovement.png)</p><p>So…. how to start :)</p><p>First of all, here is a quick summary of the new API for LCS - in Dynamics 365 F&O.</p><p>Like you know, we were not able to perform automatic Database movement in the past. We get only to an Azure Marketplace a flow between Azure DevOps release pipeline in order to upload your BUILD package and also setup an automatic deployment. It was the very beginning to perform great automatic release pipelines : like me, deploying every night for customers a recent package in our TEST environments every night after BUILD completed.</p><p>Database movement operations are a suite of self-service actions that can be used as part of Data Application Lifecycle Management (also referred to as <em>DataALM</em>). These actions provide structured processes for common implementation scenarios such as golden configuration promotion, debugging/diagnostics, destructive testing, and general refresh for training purposes.</p><p>In this topic, you will learn how to use database movement operations to perform refresh, export, import, and various flavors of point-in-time restore.</p><p>At the time, I write this article, the LCS API have only 4 methods but I hope Microsoft will add soon more methods and of course I will share that with you depending on which and when it will be possible.</p><p>We can perform the following operations through the RESTful API:</p><ul><li><p>List DB backups for an LCS project.</p></li><li><p>Create a DB refresh between two environments (only Prod and Sandbox environments, like we can do in LCS).</p></li><li><p>Get an ongoing operation status.</p></li></ul><p>Quick feedbacks for Microsoft : we really need to add also monitoring KPI stuff methods in order to get the DTU SQL Percentage Live for production or other stuff like that, in order to not connect every time in the LCS Portal and check if everything looks good : to be proactive in fact / and maybe also restart service etc… : but yep I maybe ask a lot, it’s a good start now that this API is open, so I know that Microsoft will bring this API even better this year !</p><p><a href="https://docs.microsoft.com/en-us/dynamics365/fin-ops-core/dev-itpro/database/api/dbmovement-api-overview?WT.mc_id=BA-MVP-5003744">Microsoft Documentation - LCS API</a></p><hr><p>First, you will need to create an Azure AAD in order to connect to the LCS API.</p><p>You can go here for the How-To setup :</p><p><a href="https://docs.microsoft.com/en-us/dynamics365/fin-ops-core/dev-itpro/database/api/dbmovement-api-authentication?WT.mc_id=BA-MVP-5003744">https://docs.microsoft.com/en-us/dynamics365/fin-ops-core/dev-itpro/database/api/dbmovement-api-authentication</a></p><p>Don’t forget to copy somewhere your ClientID : ApplicationID and also to generate a ClientSecret. Also don’t forget to put the Dynamics Lifecycle Services like below as a Delegated access, with Grant Admin permission.</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586894286172-KZ2TY6UYVPG3KYNQGZWK/ke17ZwdGBToddI8pDm48kIYsmS_RYdETrfsiJtoZgiN7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QPOohDIaIeljMHgDF5CVlOqpeNLcJ80NK65_fV7S1UbKt62EjeZyxnEnVFQmB361CheMshuWChtkz_Oo9DJqtP7cJNZlDXbgJNE9ef52e8w/Screenshot+2020-04-14_21-57-02-177.png alt="Screenshot 2020-04-14_21-57-02-177.png"></p><p>![Screenshot 2020-04-14_21-57-02-177.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_21-57-02-177.png)</p><p>So, now you have the access to call the LCS API, and you can authenticate to it. But maybe, like me, if you had in the past configure the AzureDevOps release pipeline process to connect to LCS, you had maybe already an App Registration in your Azure AD, so you can keep it and reuse for this purpose.</p><hr><p>Just for your information, It was not possible to create directly for you Custom Connectors in PowerAutomate in order to deploy it more easily. Since the LCS API use at the moment a strange and old school authentification. Hope I can share that when OAuth 2.0 will be used for this API !). But these samples will be enough and easy to configure, trust me !</p><p>Now, you can get my PowerAutomate / Flow samples directly in my Github Account :</p><p>Download all the 3 ZipFiles</p><p><a href=https://github.com/AurelienClere-365/ALM-LCS-PowerAutomate>ALM LCS PowerAutomate Samples - Github</a></p><p>After, you can go to your PowerAutomate account. I know that partners/customers in FinOps are not (yet ?) going very much in there, but still, I hope I will help you to discover this fantastic feature in the PowerPlatform ! And yes, normally (like me), if you had bought your F&O licences, <strong>you have already a free account for every users, and it will be more than enough to setup some flows like this one.</strong></p><p><a href=https://flow.microsoft.com/>https://flow.microsoft.com</a></p><p>Go, to “My Flows” in order to import it.</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586895215632-O9RJWL4RYFF4X4BJWM8V/ke17ZwdGBToddI8pDm48kJRImbYr4zzAS4oRTutlQLJ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QHyNOqBUUEtDDsRWrJLTmPFWxJOCX5TaB84eCNiIPe9RsLEOh63gTfR0hFzL56M8472QQPo7IFfB0A5cnSpQL/Screenshot+2020-04-14_22-13-04-870.png alt="Screenshot 2020-04-14_22-13-04-870.png"></p><p>![Screenshot 2020-04-14_22-13-04-870.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-13-04-870.png)</p><p>Select my ZIP file from my Github,</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586895725870-M8H1XDYEE0CLJ417VZCM/ke17ZwdGBToddI8pDm48kNnXE-ImjUm64FLUZFfHAUB7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0n-PK7QhayQSn5KfMiCgVpEL239U_ev3Bt2OvySu8BybBdVPenL8tNXsv2QVRZ_ZvQ/Screenshot+2020-04-14_22-17-15-902.png alt="Screenshot 2020-04-14_22-17-15-902.png"></p><p>![Screenshot 2020-04-14_22-17-15-902.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-17-15-902.png)</p><p>Here, don’t be afraid for the 2 resources / connectors (Mail & Push mobile notification) you can setup it before importing or just map to your connectors if you had already setup for other flows before. I just used them in order to give you some example of actions, you can delete them after import process.</p><p>When you have done all done 3 imports of the sample, let’s go in 1 by 1 if you don’t mind !</p><hr><ol><li>1. PowerAutomate Sample - LCS API - Automatic refresh database</li></ol><hr><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586896013101-8GJY6GRAGHKMM7W6WJWD/ke17ZwdGBToddI8pDm48kBOxagEjEBCBvT6-GFvbMGcUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYy7Mythp_T-mtop-vrsUOmeInPi9iDjx9w8K4ZfjXt2dh1GJzNteJnPTF_u_nDvtX17kI02e_3MP4SBpAf3TVYXCjLISwBs8eEdxAxTptZAUg/Screenshot+2020-04-14_22-26-41-946.png alt="Screenshot 2020-04-14_22-26-41-946.png"></p><p>![Screenshot 2020-04-14_22-26-41-946.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-26-41-946.png)</p><p>If you go in, I will explain step-by-step in order to configure it and also give inputs why I’ve done that :)</p><p>Click on “EDIT” button.</p><p>Here is below the whole flow, without any line of code :)</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586896086997-MGQ9GH2Z3FWJYF15N4PU/ke17ZwdGBToddI8pDm48kJ9eH5U6XJOKZpTmjZj2RRN7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QHyNOqBUUEtDDsRWrJLTmtRRaKn767BRkbQRoY9JeIcBKMYkZxNnBftbXHikrf2woqcWgYLj-NnaE2zEEMsC_/Screenshot+2020-04-14_22-27-54-950.png alt="Screenshot 2020-04-14_22-27-54-950.png"></p><p>![Screenshot 2020-04-14_22-27-54-950.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-27-54-950.png)</p><p>So, first step, since it’s a scheduled flow in my example, I can setup when my flow will run. Here I have put every weedays at 7 p.m but sure you can edit it of course. Keep in mind, that you can of course do it by a trigger from other connector in PowerAutomate. Like maybe do it after an Azure DevOps Pipeline is finished or after a BUILD process, after also an approval by someone else in Microsoft Teams in adaptive card, by a click in a button in a PowerApps : well, I can give 150 examples so you can setup like you want !</p><p><strong>Just be careful also on the interval, you can setup only 3 refresh in a day for 1 target environment ! (limitation by LCS)</strong></p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586896402283-Y6JPL1I2UHBYIO0OTDV4/ke17ZwdGBToddI8pDm48kNusjgAdiLNZlkLb20YFOY8UqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcPLBNw8slsAlc3KCQUSP_qYq05jGWNuL50WhzgDfdXEqMcHt_TOerJcOxwCSdBRWW/Screenshot+2020-04-14_22-33-15-144.png alt="Screenshot 2020-04-14_22-33-15-144.png"></p><p>![Screenshot 2020-04-14_22-33-15-144.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-33-15-144.png)</p><p>After I just create a variable to put your LCS project ID. Of course, change the value in it to reflect your current LCS project.</p><p>You can grab it directly in your LCS portal if you don’t know it</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586896597087-3H5DXVOFGIUFGDJFGAJK/ke17ZwdGBToddI8pDm48kAPaAM8es9YSDZgTQ8r7nLXlfiSMXz2YNBs8ylwAJx2qgRUppHe6ToX8uSOdETM-XipuQpH02DE1EkoTaghKW779xRs5veesYFcByqmynT9oN8I9Lxr8iUc_n2aYKZGfzfds731YM61VJw6aqOOyXY0/Screenshot+2020-04-14_22-36-00-492.png alt="Screenshot 2020-04-14_22-36-00-492.png"></p><p>![Screenshot 2020-04-14_22-36-00-492.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-36-00-492.png)</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586896626557-JK9DEIPARS3LSP9AL3G1/ke17ZwdGBToddI8pDm48kGYX1UIm3Rz_VO2ZrK2uKSEUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcbOGAZ6z_-ifnnakxOqBFQazLrRFr1zdoVV3soiRtJke4Ba8_i9wpXi3U8xRA88QL/Screenshot+2020-04-14_22-36-59-170.png alt="Screenshot 2020-04-14_22-36-59-170.png"></p><p>![Screenshot 2020-04-14_22-36-59-170.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-36-59-170.png)</p><p>After, I use the HTTP connector to perform the authentification with of course your Azure Application ID and Secret token that you have created earlier.</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586896899342-EB0RQ74QK8KFVXJBPDC3/ke17ZwdGBToddI8pDm48kG_NvQSHiANF7TPTaSI_HHl7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QHyNOqBUUEtDDsRWrJLTmzp1_Eb9xzmfqVXnlGz_LxE57M1b1KZdQxQn882182c81nc-AcUmw9lpfSqfCVVQR/Screenshot+2020-04-14_22-41-22-394.png alt="Screenshot 2020-04-14_22-41-22-394.png"></p><p>![Screenshot 2020-04-14_22-41-22-394.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-41-22-394.png)</p><p>You will need here only to change the values of : username, password, clientid and clientsecret.</p><p>Keep the resource and grant_type like this, as it is. Don’t change the Content-Type of the header.</p><p>One more thing : don’t use an LCS account that of course doesn’t have access and have appropriate security role. And like me, don’t use an account that has a MFA account (Multi Factor Authentification), use like an administrator/service account.</p><p>After I just use the Parse JSON feature, in order to get the object of the response. The most important thing is the property : <strong>Access_Token</strong></p><p>It will be used after for every call to the LCS API, in the header, you will see :)</p><p>Keep in mind that the Token is for 1 hour of expiration !! So don’t forget to refresh your call to authenticate after 1 hour if you need to !</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586897083956-GD5MJSOV3RKXK1GDJGJJ/ke17ZwdGBToddI8pDm48kCpBDbFAptJJfatgsYRsoJEUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcC2kacJ0CqhLvb1Bkm6ExxyYFAuAnGr4X911ziiyyuE1TfaF2IG745r71zGtoduOI/Screenshot+2020-04-14_22-44-33-225.png alt="Screenshot 2020-04-14_22-44-33-225.png"></p><p>![Screenshot 2020-04-14_22-44-33-225.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-44-33-225.png)</p><p>After I have created 2 more variables : the source & target environment of your LCS environments that you want to refresh database. Of course, change by your need !</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586897518548-ZKBTMFVCXVYOO0MK6O3U/ke17ZwdGBToddI8pDm48kLToGKrPSJpMeKxABl-hKLkUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKckIMkVtmK9itNEAsLDH5QavKgRNltTOfvPYVfDvswduDy5g7uJxbWAIXEK35pE8aZ/Screenshot+2020-04-14_22-51-43-762.png alt="Screenshot 2020-04-14_22-51-43-762.png"></p><p>![Screenshot 2020-04-14_22-51-43-762.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-51-43-762.png)</p><p>As a reminder, you can get the Environment ID by going in more details of LCS.</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586897466072-JUIHRERZE6UNHUBN2VRC/ke17ZwdGBToddI8pDm48kHWVREN8iOcIHzx5tlr8IqJZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZUJFbgE-7XRK3dMEBRBhUpw3LYjC_L5RLfgY2yuXmlXh89ReDWQ2Y47JFcpcYSAm8ezJ9orYS6bRLsptQlvhehQ/Screenshot+2020-04-14_22-49-46-630.png alt="Screenshot 2020-04-14_22-49-46-630.png"></p><p>![Screenshot 2020-04-14_22-49-46-630.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-49-46-630.png)</p><p>Finally I call the LCS API to refresh the database, like this :</p><p>Here you don’t have to change anything, good right ? :)</p><p>But, I want to explain the Authorization header. It’s here that we put the Access_Token of the response after authentification.</p><p>It’s like : Bearer xxxxxxxxxxxxxxxxx_veryhugemassive_token</p><p><strong>The space key is mandatory, so don’t forget it !</strong></p><p><strong>Of course at the end, I add it also a Parse JSON to build the object response of the API.</strong></p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586897584596-K2EOR81E5E1M5YHYCUUA/ke17ZwdGBToddI8pDm48kD9zl4AkANrOeJqFEyMY3SF7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QHyNOqBUUEtDDsRWrJLTm7ynbqeCwAi0oNfL2wZmqFETJMfroulGoOuEBFevqkwbvfojKWdp6Pwk0PKuuvOeS/Screenshot+2020-04-14_22-52-53-666.png alt="Screenshot 2020-04-14_22-52-53-666.png"></p><p>![Screenshot 2020-04-14_22-52-53-666.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-52-53-666.png)</p><p>After, I added a conditional split. Of course, the purpose is to achieve a different path in the Flow, if the response is OK or not…</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586897815939-S3D5IQABHJMN05EQ4USY/ke17ZwdGBToddI8pDm48kPY2sMJ-GzKwn5o2beHnJ80UqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcmkrMuNj-d-pGEuEVtvmcYCGr2sWqgiuJonEbmJPoM2ZiExWWyITdhB_ChF6xESmh/Screenshot+2020-04-14_22-56-40-282.png alt="Screenshot 2020-04-14_22-56-40-282.png"></p><p>![Screenshot 2020-04-14_22-56-40-282.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-56-40-282.png)</p><p>In my “not success path”, I just put a Push Mobile Notification Action, but it’s just an example of course. You can change it by whatever you like. Don’t forget you have now more than 300 connectors in PowerAutomate (Microsoft and other third-party apps !)</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586897948036-Z3TIG622QGFMFGRI245M/ke17ZwdGBToddI8pDm48kLBLB1dLiprfPNpwZLwftbYUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKchdW1C_5yliS9ClpRXzLGhYzQt9krJY4t9_9rG0IWo-MAa2XlH6IGYRO0nbD7JauW/Screenshot+2020-04-14_22-58-57-340.png alt="Screenshot 2020-04-14_22-58-57-340.png"></p><p>![Screenshot 2020-04-14_22-58-57-340.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_22-58-57-340.png)</p><p>On my “success path”, here is for me the most important feature !</p><p>First step here, I wait for 1 hour, magic no ? but why ? Well because, we don’t have to call LCS API to fetch the status of the current activity of the database refresh until more than 1 hour. Like me, it takes 1hour30min and sometimes maybe 2 hours to finish all the refresh. But you change it of course by adding just 30 minutes of wait if you had experience faster refresh on your side ! It’s also for me a good example to show you that we can put Expression without to be a massive developper !</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586898030953-XB2Q2JXULPGBFABQNDNA/ke17ZwdGBToddI8pDm48kPywePQIGQ6MGw-HhOE94B0UqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYwL8IeDg6_3B-BRuF4nNrNcQkVuAT7tdErd0wQFEGFSnMveftintnGPb9KKrBtKm8rYmhUdw8UivY3LGcG5doeU5ykmURjYCpOMCVp1Dd1dkg/Screenshot+2020-04-14_23-00-18-825.png alt="Screenshot 2020-04-14_23-00-18-825.png"></p><p>![Screenshot 2020-04-14_23-00-18-825.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-00-18-825.png)</p><p>After I’ve done a Do Until feature, in order to call every 5 minutes the LCS API to fetch the status. In order to after doing some actions in the same flow.</p><p>The end of my “while'“ loop is until we’ve got a Status Operation than is not equal to : In Progress. <strong>Just be careful of the Change Limits here, you have to increase it to 300 like me</strong>, because by default it’s 60 : that’s say that we will only do this part for 60 minutes. But I already do that for you :)</p><p>Update (17/04/20) : Just found that you can also increase the timeout of the Do Until statement. By default it’s PT1H , you can change by PT2H for 2 hours or more if you need.</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586898355106-A256FF32XMO5MUUCEQX9/ke17ZwdGBToddI8pDm48kCYRzNJyjW7_yn5qib_bEiIUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKc-vmkWlwiNI1W5qMgJSzaXm-MV9obnrfVCMgtxxEIjfj3gRYTso5VTy9GH_TnkTet/Screenshot+2020-04-14_23-04-57-449.png alt="Screenshot 2020-04-14_23-04-57-449.png"></p><p>![Screenshot 2020-04-14_23-04-57-449.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-04-57-449.png)</p><p>After, I just fetch the status of the Operation/Activity of the database refresh to know if it’s finished :) Parsing JSON again of course, every time in fact so I hope you are now familiar with that.</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586898535078-LWGB6KA2PDQDR2FWNTS3/ke17ZwdGBToddI8pDm48kE044ww_KRI14uDl4Kh6OdB7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QHyNOqBUUEtDDsRWrJLTmrP7WItXxdD8oQEwWz4rNcfx3qYhZCnpzNskxJy34L14Q5dvIzbcV3w4obtUcqdlT/Screenshot+2020-04-14_23-05-29-692.png alt="Screenshot 2020-04-14_23-05-29-692.png"></p><p>![Screenshot 2020-04-14_23-05-29-692.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-05-29-692.png)</p><p>And now, when it’s ended, why I’ve done that ? Well because on my side (and I think you also), you have some “Post-Refresh” statement - script or SQL script to achieve. As you know, after a refresh database, you have all BatchJobs On Hold, only 1 user access activated, and you want maybe to change some parameter to reflect the change and of course don’t activate the Email distributor batch to sent email to a customer from an UAT Instance… believe me I’ve seen that many times !</p><p>So that’s why I’ve put this last step here and will explain more deeper with just a small part of X++ code for AX Technical guys.</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586898779648-OH17KB46ZOYYG7S7OW3R/ke17ZwdGBToddI8pDm48kJB4Zm0fT1_DkfR5OLfMPH8UqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcOEutgjccf2d7txDUONr3n33jGwaC4Ywnq6szRl0-NPGqS_oy1YME7g4agPvGgeEl/Screenshot+2020-04-14_23-12-48-036.png alt="Screenshot 2020-04-14_23-12-48-036.png"></p><p>![Screenshot 2020-04-14_23-12-48-036.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-12-48-036.png)</p><p>In fact, it was not possible for me to give you a sample of the Dyn365 F&O connector to share it (without giving my credentials) directly in this sample, so you will need to do it yourself for this part.</p><p>So, of course you will erase this part of sending email after completion, it’s irrelevant. You already receive an email from LCS when the refresh is done.</p><p>First, you can of course add other actions if you want to, like I’ve said before you have 300 connectors so you can put something else.</p><p>But for me, you will change by that !! The Dynamics 365 FinOps connector in order to call Action / in fact it’s like a job in AX. It refers to the methods applied to a data entity.</p><p>Create a new step like that by choosing the right connector. You will notice that you have multiple actions. Here you can see that for other Flow/PowerAutomate you can achieve more : by creating, updating, retrieving records etc…. so for other use cases, you can have a look !</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586899101295-GX48X9FYGOGINUBPQJTQ/ke17ZwdGBToddI8pDm48kDMeEXQHkHFHl7JtcGDXsNx7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QHyNOqBUUEtDDsRWrJLTmbTGb-uIaJrW1hb62VKR-WQUjy6RmmYdFuUMcRoRKRFFowquYUhiCaWVmbLRXKHR-/Screenshot+2020-04-14_23-18-07-784.png alt="Screenshot 2020-04-14_23-18-07-784.png"></p><p>![Screenshot 2020-04-14_23-18-07-784.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-18-07-784.png)</p><p>Here, I will pick “Execute Action” :</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586899343567-4EOHUSR8XEGVZIVNZAE1/ke17ZwdGBToddI8pDm48kCq1VxWbYUEoQo0GSj5Rz1AUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcYxkYOprD1odUqsid1tzl-AC9CaVwmwSWH_UxWDxUr9dKfAl_2WCPvTog9w3WXvur/Screenshot+2020-04-14_23-20-21-574.png alt="Screenshot 2020-04-14_23-20-21-574.png"></p><p>![Screenshot 2020-04-14_23-20-21-574.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-20-21-574.png)</p><p>But, like me, my question was : “What the hell are coming from these actions ???”</p><p>See the documentation of the connector F&O :</p><p><a href="https://docs.microsoft.com/en-us/dynamics365/fin-ops-core/dev-itpro/data-entities/fin-ops-connector?WT.mc_id=BA-MVP-5003744">Learn more</a></p><p>Like I said, it’s coming from Methods in the Data Entities in F&O. So like I’ve done below, you can create a custom one, and create method that in fact will do of course your post-refresh database script. Like me, it was done for reactivate all users, batchjobs. But sure, you can do it depending on your needs !</p><ul><li><strong>Just as a reminder, don’t forget to use the connector F&O with the Environment Manager that have access after a database refresh !</strong></li></ul><p>So just create a new Data entity, that refer to whatever table coming from AX like that :</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586899557976-UWA7W5M2AA86W06WCGPH/ke17ZwdGBToddI8pDm48kMAfXyi2hWkRKYfWL1L-9ytZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZUJFbgE-7XRK3dMEBRBhUpyECULE1HnyqH3pLMx6RmkrApnRZUfQqDNljbc64M4Bn_3Crv_a795OMg9fcLpKYRM/Screenshot+2020-04-14_23-24-55-272.png alt="Screenshot 2020-04-14_23-24-55-272.png"></p><p>![Screenshot 2020-04-14_23-24-55-272.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-24-55-272.png)</p><p>Create your methods, that refer to <strong>SysODataActionAttribute</strong>.</p><p>Here I don’t give a response (void) but you can of course also put some object if you need to get back to PowerAutomate flow.</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586899590906-Q3WJBHAQ191K0HLWSR8J/ke17ZwdGBToddI8pDm48kHjXoLbmJg50zveD-Fp2EMF7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QHyNOqBUUEtDDsRWrJLTmKhfNlgrI9RoL2yig5n9s2SMrm1ZgV1pWNwV5Cw9AV13ZXZVbGHRdgCaGfh2jpVBk/Screenshot+2020-04-14_23-25-11-005.png alt="Screenshot 2020-04-14_23-25-11-005.png"></p><p>![Screenshot 2020-04-14_23-25-11-005.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-25-11-005.png)</p><p>Here we are, finished for this first sample.</p><hr><ol start=2><li>2. LCS API - Export database</li></ol><hr><p>You already know that we can export database also on the LCS Portal by manual action on a Sandbox instance. Of course, it can be good to do it like just after our previous sample because we have done a flow (DataALM) to refresh the production to an UAT instance. If you want to get the .bacpac (backup of SQL Azure) in order to deploy it (implied your production database) to a DEV environment. Maybe also because you want to archive it to a safe repository. So yes, the LCS API has already a method for that, that’s why I made this sample for you.</p><p>I assume that you have already download it from my GitHub Account before and already import it like the previous one.</p><p>Go in this flow.</p><p>I will not explain again this part, because it’s exactly the same as the Database Refresh.</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586900170795-NP9T0CRE1FLL0OPRQS86/ke17ZwdGBToddI8pDm48kHRr2a4pD_4mXM92OO0vSzcUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcuaKRxl3sM-POo7-nZbOeNs60ZpBKv-1EWqCm9YTvHlLvujTjex0eTdJMDS4tiJQ4/Screenshot+2020-04-14_23-35-58-495.png alt="Screenshot 2020-04-14_23-35-58-495.png"></p><p>![Screenshot 2020-04-14_23-35-58-495.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-35-58-495.png)</p><p>After, I made 2 variables : the backupName wanted and also the environmentId that you want to export the database.</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586900276735-QW1D3DHITWQCKZCXWD9C/ke17ZwdGBToddI8pDm48kAUtUUd_CxcGrA3MDWseIqgUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcslFux2q53GerjDsuC1EM4rii86fyK78Q1uJ8-19Wi0CxFscXz3tvN1GriILYpFuk/Screenshot+2020-04-14_23-36-59-889.png alt="Screenshot 2020-04-14_23-36-59-889.png"></p><p>![Screenshot 2020-04-14_23-36-59-889.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-36-59-889.png)</p><p>After, I call the LCS API and grab the response to a JSON object.</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586900358683-6ENVHP1P2UDZ71CFE4IH/ke17ZwdGBToddI8pDm48kCoa3UrihdvfcTPT1-Da-TF7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QHyNOqBUUEtDDsRWrJLTmKqdaCfszdx2FwqNe3GVbROKyBll-kk6Z1eSOg1MHc7GzIWbSL8e6DJWh5JI4dB2F/Screenshot+2020-04-14_23-38-25-516.png alt="Screenshot 2020-04-14_23-38-25-516.png"></p><p>![Screenshot 2020-04-14_23-38-25-516.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-38-25-516.png)</p><p>Finally the conditional split, you can change like before by whatever you want.</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586900451630-NZW6Z8HTBL75LY94Q3J2/ke17ZwdGBToddI8pDm48kNok3zLgiIkhxH093ejvkKUUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYwL8IeDg6_3B-BRuF4nNrNcQkVuAT7tdErd0wQFEGFSnNGZUh7LabIOf3dCF5BOhYYfjcwaWGET3u0KX1EUtmfjb56nQZ7fqnCLzSsOdTaFqQ/Screenshot+2020-04-14_23-38-38-379.png alt="Screenshot 2020-04-14_23-38-38-379.png"></p><p>![Screenshot 2020-04-14_23-38-38-379.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-38-38-379.png)</p><hr><ol start=3><li>3. Retrieve list of database backup</li></ol><hr><p>Here, we will have the possibility to retrieve the list of the whole backup list in your LCS Asset Library. As you know, it’s the default storage, where all database backup are coming.</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586900576510-H6FM7FB30M471W4QGCV6/ke17ZwdGBToddI8pDm48kMkGPR0Z7Bj3qMxILzmR5fR7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QHyNOqBUUEtDDsRWrJLTmGQO1q8NTa-d1SLBPBcOGJyY16eUHk_AZbogR_cUcQxJDalN1ZDgjLQLaCwK7WlaR/Screenshot+2020-04-14_23-42-44-006.png alt="Screenshot 2020-04-14_23-42-44-006.png"></p><p>![Screenshot 2020-04-14_23-42-44-006.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-42-44-006.png)</p><p>At the end I’ve done a For Each feature, good way to show you this point !</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586900719105-W7ZID8VJ3356J3PFZE0Z/ke17ZwdGBToddI8pDm48kE_1RTRtECuLZI3pALqR81l7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QHyNOqBUUEtDDsRWrJLTmvAQioOWEzfze6FPGriiNu5Iq1LLzxmcZ5tU2_9DkpKCvMvy3mnraVV40aNpvxzlB/Screenshot+2020-04-14_23-44-54-577.png alt="Screenshot 2020-04-14_23-44-54-577.png"></p><p>![Screenshot 2020-04-14_23-44-54-577.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/Screenshot+2020-04-14_23-44-54-577.png)</p><p>Well… sad news : true. Because I try to add also an another HTTP Connector for the FileLocation (it’s the HTTP location where you can download your backup) but the limitation is for 100MB so you will get like me an error. My aim was after to grab the fileContent to a OneDrive, Google Drive, Sharepoint or Azure Blob Storage, but yes… at this time we can’t.</p><p>The only way that I have for you, is to do it by a more complicated way. You can create a powershell script in your own network / share folder (onPremise). You can after download the Data Gateway for PowerAutomate in order to call your script, passing through the FileLocation and your Powershell will download it on your onPremise folder. Yes I didn’t talk about that, but yes we can achieve a connection from PowerAutomate (SaaS - Cloud Only) to connect on an onPremise API - Service.</p><p><img loading=lazy src=https://images.squarespace-cdn.com/content/v1/5dee13c4b2178b0eae4710df/1586901630565-2WDSC40UAKXVOBX7JEOI/ke17ZwdGBToddI8pDm48kFcxCCt_xNkZ48mab5WAgUFZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZUJFbgE-7XRK3dMEBRBhUpwR76lFL8uFTtqw-iaosXIJV87SnD-zsHoIhNOnAkeD45UEJ_72GcD6XjtaCQ5qQlc/on-premises-data-gateway.png alt=on-premises-data-gateway.png></p><p>![on-premises-data-gateway.png](./LCS API Database Movement with PowerAutomate — PowerAzure365_files/on-premises-data-gateway.png)</p><p><a href="https://docs.microsoft.com/en-us/power-automate/gateway-reference?WT.mc_id=BA-MVP-5003744">PowerAutomate - Data Gateway onPremise</a></p><p><a href=https://sergeluca.wordpress.com/2017/12/01/upload-and-run-a-remote-powershell-script-from-microsoft-flow/>PowerAutomate - Powershell onPremise</a></p><hr><p>To conclude : I hope you like it :) Besides that, feel free to contact me, comment, do feedbacks etc…</p><p>You can see easily that PowerAutomate in part of the PowerPlatform is really a huge feature that will help us in a lot of flows for F&O project.</p><p>Because despite this technical part of DataALM, like I’ve done for other articles in this blog, we can achieve a lot more of use cases now ! Business cases , Business Events etc…</p><p>See you ! Stay tuned. Add me on social networks :)</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://nuxulu.com/tags/power-automate/>Power Automate</a></li><li><a href=https://nuxulu.com/tags/alm/>ALM</a></li><li><a href=https://nuxulu.com/tags/lcs-api/>LCS API</a></li><li><a href=https://nuxulu.com/tags/database-movement/>Database Movement</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share LCS API Database Movement with Power Automate on twitter" href="https://twitter.com/intent/tweet/?text=LCS%20API%20Database%20Movement%20with%20Power%20Automate&url=https%3a%2f%2fnuxulu.com%2f2021-05-05-lcs-api-database-movement-with-powerautomate%2f&hashtags=PowerAutomate%2cALM%2cLCSAPI%2cDatabaseMovement"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share LCS API Database Movement with Power Automate on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fnuxulu.com%2f2021-05-05-lcs-api-database-movement-with-powerautomate%2f&title=LCS%20API%20Database%20Movement%20with%20Power%20Automate&summary=LCS%20API%20Database%20Movement%20with%20Power%20Automate&source=https%3a%2f%2fnuxulu.com%2f2021-05-05-lcs-api-database-movement-with-powerautomate%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share LCS API Database Movement with Power Automate on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fnuxulu.com%2f2021-05-05-lcs-api-database-movement-with-powerautomate%2f&title=LCS%20API%20Database%20Movement%20with%20Power%20Automate"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share LCS API Database Movement with Power Automate on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fnuxulu.com%2f2021-05-05-lcs-api-database-movement-with-powerautomate%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share LCS API Database Movement with Power Automate on whatsapp" href="https://api.whatsapp.com/send?text=LCS%20API%20Database%20Movement%20with%20Power%20Automate%20-%20https%3a%2f%2fnuxulu.com%2f2021-05-05-lcs-api-database-movement-with-powerautomate%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share LCS API Database Movement with Power Automate on telegram" href="https://telegram.me/share/url?text=LCS%20API%20Database%20Movement%20with%20Power%20Automate&url=https%3a%2f%2fnuxulu.com%2f2021-05-05-lcs-api-database-movement-with-powerautomate%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://nuxulu.com>Dynamics 365 Finance Operations & Power Platform</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>