<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Reservation and on-hand inventory in warehouse management - Dynamics 365 Finance &amp; Operations | nuxulu.com</title><meta name="Description" content="Dynamics 365 Finance &amp; Operations"><meta property="og:title" content="Reservation and on-hand inventory in warehouse management" />
<meta property="og:description" content="1. Inventory reservation hierarchy in Warehouse management The reservation functionality can be used only for items that are enabled for warehouse management processes. However, if an item is itself enabled for warehouse management processes, it can be used both in warehouses that are enabled for warehouse management processes and warehouses that are not. The behavior in reservation scenarios is different, depending on the warehouse setup.
The functionality is built on reservation hierarchies and is intended to support the following:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nuxulu.com/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/" /><meta property="og:image" content="https://nuxulu.com/Icon/mstile-150x150.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-09T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-11-09T00:00:00+00:00" /><meta property="og:site_name" content="Dynamics 365 Finance &amp; Operations" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://nuxulu.com/Icon/mstile-150x150.png"/>

<meta name="twitter:title" content="Reservation and on-hand inventory in warehouse management"/>
<meta name="twitter:description" content="1. Inventory reservation hierarchy in Warehouse management The reservation functionality can be used only for items that are enabled for warehouse management processes. However, if an item is itself enabled for warehouse management processes, it can be used both in warehouses that are enabled for warehouse management processes and warehouses that are not. The behavior in reservation scenarios is different, depending on the warehouse setup.
The functionality is built on reservation hierarchies and is intended to support the following:"/>
<meta name="application-name" content="Dynamics 365 Finance &amp; Operations">
<meta name="apple-mobile-web-app-title" content="Dynamics 365 Finance &amp; Operations"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/Icon/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://nuxulu.com/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/" /><link rel="prev" href="https://nuxulu.com/2022-10-27-how-to-get-d365-azure-blob-storage-str/" /><link rel="next" href="https://nuxulu.com/2022-11-13-extend-on-hand-entities-fin-ops/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><meta name="google-site-verification" content="f08c47fec0942fa0" /><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Reservation and on-hand inventory in warehouse management",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/nuxulu.com\/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/nuxulu.com\/images\/Apple-Devices-Preview.png",
                            "width":  3200 ,
                            "height":  2048 
                        }],"genre": "posts","keywords": "on-hand, inventory, warehouse management","wordcount":  2527 ,
        "url": "https:\/\/nuxulu.com\/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management\/","datePublished": "2022-11-09T00:00:00+00:00","dateModified": "2022-11-09T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/nuxulu.com\/images\/avatar.png",
                    "width":  528 ,
                    "height":  560 
                }},"author": {
                "@type": "Person",
                "name": "Max Nguyen"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3534873375492458" crossorigin="anonymous"></script>
            <a href="/" title="Dynamics 365 Finance &amp; Operations | nuxulu.com"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/Icon/favicon-32x32.png"
        data-srcset="/Icon/favicon-32x32.png, /Icon/favicon-32x32.png 1.5x, /Icon/favicon-32x32.png 2x"
        data-sizes="auto"
        alt="/Icon/favicon-32x32.png"
        title="/Icon/favicon-32x32.png" /><span class="header-title-pre">  </span>Dynamics 365 Finance &amp; Operations</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/finopsnews/"> X&#43;&#43; Feed </a><a class="menu-item" href="/erd/default.htm"> Entity Relationship </a><a class="menu-item" href="/posts/index.xml"> Rss Feed </a><a class="menu-item" href="/lab/"> Practice lab </a><a class="menu-item" href="/about/"> About me </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3534873375492458" crossorigin="anonymous"></script>
                <a href="/" title="Dynamics 365 Finance &amp; Operations | nuxulu.com"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/Icon/favicon-32x32.png"
        data-srcset="/Icon/favicon-32x32.png, /Icon/favicon-32x32.png 1.5x, /Icon/favicon-32x32.png 2x"
        data-sizes="auto"
        alt="/Icon/favicon-32x32.png"
        title="/Icon/favicon-32x32.png" /><span class="header-title-pre">  </span>Dynamics 365 Finance &amp; Operations</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/finopsnews/" title="">X&#43;&#43; Feed</a><a class="menu-item" href="/erd/default.htm" title="">Entity Relationship</a><a class="menu-item" href="/posts/index.xml" title="">Rss Feed</a><a class="menu-item" href="/lab/" title="">Practice lab</a><a class="menu-item" href="/about/" title="">About me</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Reservation and on-hand inventory in warehouse management</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/series/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Max Nguyen</a></span>&nbsp;<span class="post-category">included in <a href="/categories/finops/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>FinOps</a>&nbsp;<a href="/categories/scm/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>SCM</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="November 9, 2022">November 9, 2022</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;2527 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;12 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-inventory-reservation-hierarchy-in-warehouse-management">1. <strong>Inventory reservation hierarchy in Warehouse management</strong></a>
      <ul>
        <li><a href="#11-reservation-hierarchies">1.1 <strong>Reservation hierarchies</strong></a></li>
        <li><a href="#12-reservation-hierarchies-implementation">1.2 <strong>Reservation hierarchies implementation</strong></a></li>
        <li><a href="#13-making-reservations-on-different-levels">1.3 Making reservations on different levels</a></li>
      </ul>
    </li>
    <li><a href="#2-impact-of-the-reservation-hierarchy-setup">2. Impact of the reservation hierarchy setup</a></li>
    <li><a href="#3-on-hand-representation-and-calculations">3. On-hand representation and calculations</a>
      <ul>
        <li><a href="#31-on-hand-for-items-that-are-using-warehouse-management-processes">3.1 On-hand for items that are using warehouse management processes</a>
          <ul>
            <li><a href="#example-a">Example A</a></li>
            <li><a href="#example-b">Example B</a></li>
          </ul>
        </li>
        <li><a href="#32-implementation-of-on-hand-calculations">3.2 Implementation of on-hand calculations</a></li>
      </ul>
    </li>
    <li><a href="#4-reservation-strategies">4. Reservation strategies</a></li>
    <li><a href="#5-details-about-the-implementation-of-reservation-strategies">5. Details about the implementation of reservation strategies</a></li>
    <li><a href="#6-synchronization-of-dimensions-between-receipts-and-issues">6. Synchronization of dimensions between receipts and issues</a></li>
    <li><a href="#7-details-about-the-implementation-of-synchronization-between-receipts-and-issues">7. Details about the implementation of synchronization between receipts and issues</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="1-inventory-reservation-hierarchy-in-warehouse-management">1. <strong>Inventory reservation hierarchy in Warehouse management</strong></h2>
<p>The reservation functionality can be used only for items that are enabled for warehouse management processes. However, if an item is itself enabled for <a href="https://learn.microsoft.com/en-us/dynamics365/supply-chain/warehousing/flexible-warehouse-level-dimension-reservation" target="_blank" rel="noopener noreffer ">warehouse management processes</a>, it can be used both in warehouses that are enabled for warehouse management processes and warehouses that are not. The behavior in reservation scenarios is different, depending on the warehouse setup.</p>
<p>The functionality is built on reservation hierarchies and is intended to support the following:</p>
<ul>
<li>Flexible warehouse operations.</li>
<li>Postponement of reservation details.</li>
<li>Clear separation of which inventory dimensions can be specified, and when they can be specified.</li>
</ul>
<h3 id="11-reservation-hierarchies">1.1 <strong>Reservation hierarchies</strong></h3>
<p>A typical reservation hierarchy for an item that uses the <code>Site</code>, <code>Warehouse</code>, <code>Inventory status</code>, <code>Location</code>, and <code>License plate</code> dimensions as physical inventory dimensions.</p>
<p><figure><a class="lightgallery" href="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/Reservation-hierarchies.png" title="Image" data-thumbnail="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/Reservation-hierarchies.png" data-sub-html="<h2>Reservation-hierarchies</h2><p>Image</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/Reservation-hierarchies.png"
            data-srcset="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/Reservation-hierarchies.png, /2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/Reservation-hierarchies.png 1.5x, /2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/Reservation-hierarchies.png 2x"
            data-sizes="auto"
            alt="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/Reservation-hierarchies.png" width="903" height="633" />
    </a><figcaption class="image-caption">Reservation-hierarchies</figcaption>
    </figure></p>
<p>The level with the lowest value in the Reservation hierarchy level column is the least-specific level, in the example above this is the site level.
The higher the value, the more details are required to make a reservation on that level.</p>
<h3 id="12-reservation-hierarchies-implementation">1.2 <strong>Reservation hierarchies implementation</strong></h3>
<p><figure><a class="lightgallery" href="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/Reservation-hierarchies-implementation.png" title="Image" data-thumbnail="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/Reservation-hierarchies-implementation.png" data-sub-html="<h2>Reservation-hierarchies-implementation</h2><p>Image</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/Reservation-hierarchies-implementation.png"
            data-srcset="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/Reservation-hierarchies-implementation.png, /2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/Reservation-hierarchies-implementation.png 1.5x, /2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/Reservation-hierarchies-implementation.png 2x"
            data-sizes="auto"
            alt="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/Reservation-hierarchies-implementation.png" width="1577" height="587" />
    </a><figcaption class="image-caption">Reservation-hierarchies-implementation</figcaption>
    </figure></p>
<p>The definitions of reservation hierarchies are stored in the <strong>WHSReservationHierarchy</strong> and <strong>WHSReservationHierarchyElement</strong> tables. These are shared tables. A reservation hierarchy can be associated with one item within a company which presents by <strong>WHSReservationHierarchyItem</strong>.
The <strong>WHSReservationHierarchyProvider</strong> class provides a large number of APIs that are useful when you work with and query the reservation hierarchy for an item.</p>
<h3 id="13-making-reservations-on-different-levels">1.3 Making reservations on different levels</h3>
<p>Based on the reservation hierarchy, you can make reservations on different levels without providing details about where to reserve and what dimensions to reserve on. This lets you postpone specific details, such as the location or license plate to make the reservation. The location to reserve items on can be determined later by the <a href="https://learn.microsoft.com/en-us/dynamics365/supply-chain/warehousing/warehouse-configuration" target="_blank" rel="noopener noreffer "><strong>location directive</strong></a>.</p>
<p>As another example, you make reservations for a sales order created on <strong>site</strong> <code>Site1</code> and <strong>warehouse</strong> <code>WHS42</code>, which is a warehouse that is enabled for WHS processes, and for the Available inventory status. For this example, the reservation is made only
on the inventory status level.</p>
<p><figure><a class="lightgallery" href="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/reservations-on-different-levels.png" title="Image" data-thumbnail="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/reservations-on-different-levels.png" data-sub-html="<h2>reservations-on-different-levels</h2><p>Image</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/reservations-on-different-levels.png"
            data-srcset="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/reservations-on-different-levels.png, /2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/reservations-on-different-levels.png 1.5x, /2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/reservations-on-different-levels.png 2x"
            data-sizes="auto"
            alt="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/reservations-on-different-levels.png" width="2421" height="489" />
    </a><figcaption class="image-caption">reservations-on-different-levels</figcaption>
    </figure></p>
<p>Location <code>Main006</code> will be specified when processing the work</p>
<p><figure><a class="lightgallery" href="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/location.png" title="Image" data-thumbnail="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/location.png" data-sub-html="<h2>location</h2><p>Image</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/location.png"
            data-srcset="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/location.png, /2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/location.png 1.5x, /2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/location.png 2x"
            data-sizes="auto"
            alt="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/location.png" width="2736" height="414" />
    </a><figcaption class="image-caption">location</figcaption>
    </figure></p>
<h2 id="2-impact-of-the-reservation-hierarchy-setup">2. Impact of the reservation hierarchy setup</h2>
<p>For warehouses that are enabled for warehouse management processes, the setup of reservation hierarchies greatly affects the processes for <a href="https://learn.microsoft.com/en-us/dynamics365/supply-chain/warehousing/release-to-warehouse-process" target="_blank" rel="noopener noreffer ">outbound orders</a>, such as sales orders and transfer orders.</p>
<p>When you set up a reservation hierarchy, the key is to determine which dimensions should be positioned above the location level in the hierarchy, and which should be below. The following table describes the effects of arranging dimensions either above or below the location level.</p>
<table>
<thead>
<tr>
<th>Dimension placement</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Dimension above location</td>
<td>The inventory dimension above the location level must be determined before the</td>
</tr>
<tr>
<td></td>
<td>Warehouse management functionality can be used. Therefore, this typically happens</td>
</tr>
<tr>
<td></td>
<td>during order processing or by letting the reservation system determine the dimensions.</td>
</tr>
<tr>
<td>Batch above location</td>
<td>Process industry functionality for batches requires that the Batch number dimension be</td>
</tr>
<tr>
<td></td>
<td>above the Location dimension in the reservation hierarchy. When this is the case, all</td>
</tr>
<tr>
<td></td>
<td>functionality for First Expiry First Out (FEFO), same batch, batch disposition codes, and</td>
</tr>
<tr>
<td></td>
<td>batch attributes is supported.</td>
</tr>
<tr>
<td>Dimensions below location</td>
<td>WHS and warehouse workers can determine the Location dimension and the</td>
</tr>
<tr>
<td></td>
<td>dimensions below it.</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>The Location dimension and any dimensions below it should not be entered into the sales</td>
</tr>
<tr>
<td></td>
<td>and transfer lines if you expect work to be created. For example, if the Batch number</td>
</tr>
<tr>
<td></td>
<td>dimension is below the Location dimension, it should not be specified on the sales line.</td>
</tr>
<tr>
<td></td>
<td>Otherwise, WHS cannot create work to carry out the pick and pack operations.</td>
</tr>
</tbody>
</table>
<h2 id="3-on-hand-representation-and-calculations">3. On-hand representation and calculations</h2>
<h3 id="31-on-hand-for-items-that-are-using-warehouse-management-processes">3.1 On-hand for items that are using warehouse management processes</h3>
<p>The following table shows how the data might look for an item with 10 pieces available physical and 2 pieces reserved physical on the status level.</p>
<table>
<thead>
<tr>
<th>Level</th>
<th>Site</th>
<th>Warehouse</th>
<th>Inventory status</th>
<th>Location</th>
<th>License plate</th>
<th>Available physical</th>
<th>Available ordered</th>
<th>Reserved physical</th>
<th>Reserved ordered</th>
</tr>
</thead>
<tbody>
<tr>
<td>Item</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>10</td>
<td>10</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>Site</td>
<td>S1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>10</td>
<td>10</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>Warehouse</td>
<td>S1</td>
<td>WH1</td>
<td></td>
<td></td>
<td></td>
<td>10</td>
<td>10</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>Status</td>
<td>S1</td>
<td>WH1</td>
<td>Available</td>
<td></td>
<td></td>
<td>10</td>
<td>10</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>Location</td>
<td>S1</td>
<td>WH1</td>
<td>Available</td>
<td>L001</td>
<td></td>
<td>12</td>
<td>12</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>License plate</td>
<td>S1</td>
<td>WH1</td>
<td>Available</td>
<td>L001</td>
<td>LP1</td>
<td>12</td>
<td>12</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>The reservations are tracked only on the levels that are affected by the reservation. Because of the way that information about availability and reservations is stored, the corresponding values from the <strong>InventSum</strong> table cannot be used directly for items that are using warehouse management processes.</p>
<p>The following steps provide a high-level overview of the algorithm that determines the available on-hand quantity for
an item and a set of inventory dimensions:</p>
<ul>
<li>Determine the available on-hand quantity, based on the exact dimensions. This is the lowest level in the hierarchy.</li>
<li>Determine the smallest available quantity from all levels above the level found in step 1.</li>
<li>Return the smaller of the quantities found in step 1 and step 2. This is the available quantity.</li>
</ul>
<h4 id="example-a">Example A</h4>
<p>The following physical inventory exists for the item (some dimensions like site, inventory status, license plate are irrelevant and are omitted throughout the scenario):</p>
<ul>
<li><em>Warehouse: W1, Location: L1, Physical inventory: 6</em></li>
</ul>
<p>A sales order with one line is created and reserved:</p>
<ul>
<li><em>Warehouse: W1, Quantity: 5</em></li>
</ul>
<p>The sales order is released to warehouse. As a result warehouse work is created:</p>
<ul>
<li><em>Work type: Pick, Warehouse: W1, Location: L1, Quantity: 5</em></li>
<li><em>Work type: Put, Warehouse: W1, Location: Baydoor, Quantity: 5</em></li>
</ul>
<p>Now we have the following inventory transactions:</p>
<table>
<thead>
<tr>
<th>Reference</th>
<th>Warehouse</th>
<th>Location</th>
<th>Status issue</th>
<th>Quantity</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sales line</td>
<td>W1</td>
<td></td>
<td>Reserved physical</td>
<td>-5</td>
</tr>
<tr>
<td>Pick work</td>
<td>W1</td>
<td>L1</td>
<td>Reserved physical</td>
<td>-5</td>
</tr>
<tr>
<td>Put work</td>
<td>W1</td>
<td>Baydoor</td>
<td>Ordered</td>
<td>5</td>
</tr>
</tbody>
</table>
<p>So once we roll up the transactions into the <strong>InventSum</strong> table the contents of the table will look like this</p>
<table>
<thead>
<tr>
<th>Warehouse</th>
<th>Location</th>
<th>Physical inventory</th>
<th>Reserved physical</th>
<th>Available physical</th>
<th>Ordered</th>
</tr>
</thead>
<tbody>
<tr>
<td>W1</td>
<td></td>
<td>0</td>
<td>5</td>
<td>-5</td>
<td>0</td>
</tr>
<tr>
<td>W1</td>
<td>L1</td>
<td>6</td>
<td>5</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>W1</td>
<td>Baydoor</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>5</td>
</tr>
</tbody>
</table>
<p>On hand quantities for warehouse W1 like we used to do it in versions prior to AX 2012 R3 (sum up InventSum quantities for warehouse W1)</p>
<table>
<thead>
<tr>
<th>Warehouse</th>
<th>Physical inventory</th>
<th>Reserved physical</th>
<th>Available physical</th>
<th>Ordered</th>
</tr>
</thead>
<tbody>
<tr>
<td>W1</td>
<td>6</td>
<td>10</td>
<td>-4</td>
<td>5</td>
</tr>
</tbody>
</table>
<p>We should have shipped 5 items and we have 6 items on stock, 1 item is available. This is exactly the reason why summing up available and reserved quantities from the <strong>InventSum</strong> table may produce incorrect results for items that use warehouse management processes.</p>
<p>The sales reservation was taken on the warehouse level of the reservation hierarchy to ensure that we keep enough on hand in the warehouse to ship the reserved quantity. The pick work reservation was taken on the location level and it ensures that the reserved quantity will still be physically available when the warehouse worker comes to the warehouse location to pick it. Work reservation does not affect physical availability on the warehouse level. This means that the new reservation engine will be able to figure out that we still have one item available on the warehouse level.</p>
<table>
<thead>
<tr>
<th>Warehouse</th>
<th>Physical inventory</th>
<th>Reserved physical</th>
<th>Available physical</th>
<th>Ordered</th>
</tr>
</thead>
<tbody>
<tr>
<td>W1</td>
<td>6</td>
<td>5</td>
<td>1</td>
<td>5</td>
</tr>
</tbody>
</table>
<h4 id="example-b">Example B</h4>
<table>
<thead>
<tr>
<th>Reference</th>
<th>Warehouse</th>
<th>Location</th>
<th>Status issue</th>
<th>Status receipt</th>
<th>Quantity</th>
</tr>
</thead>
<tbody>
<tr>
<td>Purchase line</td>
<td>W1</td>
<td>L1</td>
<td></td>
<td>Purchased</td>
<td>10</td>
</tr>
<tr>
<td>Purchase line</td>
<td>W1</td>
<td>L2</td>
<td></td>
<td>Purchased</td>
<td>20</td>
</tr>
<tr>
<td>Sales line</td>
<td>W1</td>
<td></td>
<td>Reserved physical</td>
<td></td>
<td>-25</td>
</tr>
<tr>
<td>Pick work</td>
<td>W1</td>
<td>L1</td>
<td>Reserved physical</td>
<td></td>
<td>-10</td>
</tr>
<tr>
<td>Put work</td>
<td>W1</td>
<td>Baydoor</td>
<td>Ordered</td>
<td></td>
<td>10</td>
</tr>
</tbody>
</table>
<p>After the transactions are aggregated the <strong>InventSum</strong> table contains the following information</p>
<table>
<thead>
<tr>
<th>Warehouse</th>
<th>Location</th>
<th>Physical inventory</th>
<th>Reserved physical</th>
<th>Available physical</th>
<th>Ordered</th>
</tr>
</thead>
<tbody>
<tr>
<td>W1</td>
<td></td>
<td>0</td>
<td>25</td>
<td>-25</td>
<td>0</td>
</tr>
<tr>
<td>W1</td>
<td>L1</td>
<td>10</td>
<td>10</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>W1</td>
<td>L2</td>
<td>20</td>
<td>0</td>
<td>20</td>
<td>0</td>
</tr>
<tr>
<td>W1</td>
<td>Baydoor</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>10</td>
</tr>
</tbody>
</table>
<p>For each of the levels of the reservation hierarchy it stores available and reserved quantities in the <code>WHSInventReserve</code> table which allows the engine to calculate availability correctly.</p>
<p>To work with available quantities regardless of whether the item is using warehouse management processes or not the <code>InventIAvailability</code> interface was introduced. The following list contains the InventSum fields and methods that should not be used directly and the corresponding InventIAvailability methods that should be used instead:</p>
<table>
<thead>
<tr>
<th>Obsolete field/method</th>
<th>Corresponding InventIAvailability method</th>
</tr>
</thead>
<tbody>
<tr>
<td>InventSum.AvailOrdered</td>
<td>InventIAvailability.availTotal()</td>
</tr>
<tr>
<td>InventSum.availOrderedCalculated()</td>
<td>InventIAvailability.availTotal()</td>
</tr>
<tr>
<td>InventSum.AvailPhysical</td>
<td>InventIAvailability.availPhysical()</td>
</tr>
<tr>
<td>InventSum.availPhysicalCalculated()</td>
<td>InventIAvailability.availPhysical()</td>
</tr>
<tr>
<td>InventSum.availReservation()</td>
<td>InventIAvailability.availReservation()</td>
</tr>
<tr>
<td>InventSum.Ordered</td>
<td>InventIAvailability.ordered()</td>
</tr>
<tr>
<td>InventSum.orderedSum()</td>
<td>InventIAvailability.orderedSum()</td>
</tr>
<tr>
<td>InventSum.ReservOrdered</td>
<td>InventIAvailability.reservOrdered()</td>
</tr>
<tr>
<td>InventSum.ReservPhysical</td>
<td>InventIAvailability.reservPhysical()</td>
</tr>
</tbody>
</table>
<h3 id="32-implementation-of-on-hand-calculations">3.2 Implementation of on-hand calculations</h3>
<p>Three major APIs were introduced for retrieving item availability:</p>
<p>– <code>InventAvailabilityProvider</code>
– <code>InventAvailabilityFormCache</code>
– <code>InventOnhand</code></p>
<ul>
<li><strong>InventAvailabilityProvider</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C#" data-lang="C#"><span class="line"><span class="cl"><span class="n">InventIAvailability</span>  <span class="n">inventIAvailability</span> <span class="p">=</span> <span class="n">InventAvailabilityProvider</span><span class="p">::</span><span class="n">findByItemDim</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                                            <span class="n">InventTable</span><span class="p">::</span><span class="n">find</span><span class="p">(</span><span class="n">itemdId</span><span class="p">),</span> <span class="n">dim</span><span class="p">).</span><span class="n">parmInventAvailability</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Info</span><span class="p">(</span><span class="n">strFmt</span><span class="p">(</span><span class="s">&#34;inventIAvailability, availPhysical %1, ordered %2, reservPhysical %3, reservOrdered %4&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                <span class="n">inventIAvailability</span><span class="p">.</span><span class="n">availPhysical</span><span class="p">(),</span> 
</span></span><span class="line"><span class="cl">                <span class="n">inventIAvailability</span><span class="p">.</span><span class="n">ordered</span><span class="p">(),</span> 
</span></span><span class="line"><span class="cl">                <span class="n">inventIAvailability</span><span class="p">.</span><span class="n">reservPhysical</span><span class="p">(),</span> 
</span></span><span class="line"><span class="cl">                <span class="n">inventIAvailability</span><span class="p">.</span><span class="n">reservOrdered</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">InventAvailabilityByUnit</span> <span class="n">inventAvailabilityByUnitSum</span> <span class="p">=</span> <span class="n">InventAvailabilityProvider</span><span class="p">::</span><span class="n">findByItemSumDim</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                                                        <span class="n">InventTable</span><span class="p">::</span><span class="n">find</span><span class="p">(</span><span class="n">itemdId</span><span class="p">),</span> <span class="n">inventSum</span><span class="p">,</span> <span class="n">dim</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Info</span><span class="p">(</span><span class="n">strFmt</span><span class="p">(</span><span class="s">&#34;inventAvailabilityByUnitSum, availPhysical %1, ordered %2, reservPhysical %3, reservOrdered %4&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                <span class="n">inventAvailabilityByUnitSum</span><span class="p">.</span><span class="n">availPhysical</span><span class="p">().</span><span class="n">qty</span><span class="p">(</span><span class="k">false</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">                <span class="n">inventAvailabilityByUnitSum</span><span class="p">.</span><span class="n">ordered</span><span class="p">().</span><span class="n">qty</span><span class="p">(</span><span class="k">false</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">                <span class="n">inventAvailabilityByUnitSum</span><span class="p">.</span><span class="n">reservPhysical</span><span class="p">().</span><span class="n">qty</span><span class="p">(</span><span class="k">false</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">                <span class="n">inventAvailabilityByUnitSum</span><span class="p">.</span><span class="n">reservOrdered</span><span class="p">().</span><span class="n">qty</span><span class="p">(</span><span class="k">false</span><span class="p">)));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>InventAvailabilityFormCache</strong></li>
</ul>
<p>In scenarios where you want to display available quantities on a form you can use the InventAvailabilityFormCache class.
It is responsible for retrieving and caching available on hand quantities per item per inventory dimension combination. To use it on a form you need to:</p>
<p>– Declare an <code>InventAvailabilityFormCache</code> field in <code>classDeclaration</code> of the form.
– Initialize the cache field in the <code>init</code> method of the form:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C#" data-lang="C#"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">void</span> <span class="k">init</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">super</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">inventAvailabilityFormCache</span> <span class="p">=</span> <span class="n">InventAvailabilityFormCache</span><span class="p">::</span><span class="n">construct</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>– Flush the cache in the <code>executeQuery</code> method of the primary data source that the <code>InventSum</code> data source is joined to:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C#" data-lang="C#"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">void</span> <span class="n">executeQuery</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">inventAvailabilityFormCache</span><span class="p">.</span><span class="n">refreshCache</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">super</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>– Create display methods for available on hand fields that need to be displayed on the form. If <code>InventDim</code> is joined to <code>InventSum</code> then the display methods should be declared on the <code>InventSum</code> data source:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C#" data-lang="C#"><span class="line"><span class="cl"><span class="k">public</span> <span class="n">display</span> <span class="n">InventQtyReservPhysical</span> <span class="n">reservPhysical</span><span class="p">(</span><span class="n">InventSum</span> <span class="n">_inventSum</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">inventAvailabilityFormCache</span><span class="p">.</span><span class="n">availabilityFromSumJoinedWithDim</span><span class="p">(</span><span class="n">_inventSum</span><span class="p">,</span> <span class="n">inventDim_ds</span><span class="p">).</span><span class="n">reservPhysical</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Note that the <code>availabilityFromSumJoinedWithDim</code> method should be used. Otherwise, if <code>InventSum</code> is joined to InventDim then the display method should be declared on the <code>InventDim</code> data source:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C#" data-lang="C#"><span class="line"><span class="cl"><span class="k">public</span> <span class="n">display</span> <span class="n">InventQtyReservPhysical</span> <span class="n">reservPhysical</span><span class="p">(</span><span class="n">InventDim</span> <span class="n">_inventDim</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">inventAvailabilityFormCache</span><span class="p">.</span><span class="n">availabilityFromDimJoinedWithSum</span><span class="p">(</span><span class="n">_inventDim</span><span class="p">,</span> <span class="n">inventSum_ds</span><span class="p">).</span><span class="n">reservPhysical</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Note that the <code>availabilityFromDimJoinedWithSum</code> method should be used.</p>
<ul>
<li><strong>InventOnhand</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C#" data-lang="C#"><span class="line"><span class="cl"><span class="n">InventOnhand</span> <span class="n">inventOnHand</span> <span class="p">=</span> <span class="n">InventOnhand</span><span class="p">::</span><span class="n">newParameters</span><span class="p">(</span><span class="n">itemdId</span><span class="p">,</span> <span class="n">dim</span> <span class="p">,</span> <span class="n">dimParm</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">Info</span><span class="p">(</span><span class="n">strFmt</span><span class="p">(</span><span class="s">&#34;inventOnHand, availPhysical %1, ordered %2, reservPhysical %3, reservOrdered %4&#34;</span><span class="p">,</span> <span class="n">inventOnHand</span><span class="p">.</span><span class="n">availPhysical</span><span class="p">(),</span> <span class="n">inventOnHand</span><span class="p">.</span><span class="n">ordered</span><span class="p">(),</span> <span class="n">inventOnHand</span><span class="p">.</span><span class="n">reservPhysical</span><span class="p">(),</span> <span class="n">inventOnHand</span><span class="p">.</span><span class="n">reservOrdered</span><span class="p">()));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The on-hand information is stored in a table called <code>WHSInventReserve</code>. The <code>WHSInventReserveDelta</code> table is used to track changes that the current transaction causes in the on-hand quantity. On the final commit, the <code>WHSInventReserve</code> table is updated based on the changes in the <code>WHSInventReserveDelta</code> table.</p>
<p>Because many scenarios involve calculating on-hand quantities based on <code>itemId</code>, <code>InventDim</code>, or <code>InventSum</code> records for
both WHS-enabled and non-WHS-enabled items, APIs are provided to support the calculations in a seamless way.</p>
<p>The following example shows how to instantiate the class that can be used to calculate availability for both WHSenabled and non-WHS-enabled items.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C#" data-lang="C#"><span class="line"><span class="cl"><span class="n">InventAvailabilitySearch</span> <span class="n">availabilitySearch</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">InventIAvailability</span> <span class="n">availability</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">availabilitySearch</span> <span class="p">=</span> <span class="n">InventAvailabilitySearch</span><span class="p">::</span><span class="n">construct</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">availabilitySearch</span><span class="p">.</span><span class="n">setItemId</span><span class="p">(</span><span class="n">_itemId</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">availabilitySearch</span><span class="p">.</span><span class="n">setInventDimCriteria</span><span class="p">(</span><span class="n">_inventDimCriteria</span><span class="p">,</span> <span class="n">_inventDimCriteriaParm</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">availabilitySearch</span><span class="p">.</span><span class="n">setInventSum</span><span class="p">(</span><span class="n">_inventSum</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">availability</span> <span class="p">=</span> <span class="n">InventAvailabilityProvider</span><span class="p">::</span><span class="n">construct</span><span class="p">().</span><span class="n">find</span><span class="p">(</span><span class="n">availabilitySearch</span><span class="p">).</span><span class="n">parmInventAvailability</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">this</span><span class="p">.</span><span class="n">AvailOrderedCalculated</span>         <span class="p">=</span> <span class="n">availability</span><span class="p">.</span><span class="n">availTotal</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="k">this</span><span class="p">.</span><span class="n">AvailPhysicalCalculated</span>        <span class="p">=</span> <span class="n">availability</span><span class="p">.</span><span class="n">availPhysical</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="k">this</span><span class="p">.</span><span class="n">ReservPhysical</span>                 <span class="p">=</span> <span class="n">availability</span><span class="p">.</span><span class="n">reservPhysical</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="k">this</span><span class="p">.</span><span class="n">OrderedSum</span>                     <span class="p">=</span> <span class="n">availability</span><span class="p">.</span><span class="n">orderedSum</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The <code>InventAvailabilityProvider</code> class provides numerous other APIs that are used to determine the availability based on various types of input. The existing <code>InventOnHandQty</code> class has been updated so that it also provides correct results for items that are enabled for warehouse management processes.</p>
<p>The following illustration shows the various classes and interfaces that are used to provide and encapsulate the calculations. Note that, for the sake of simplicity, some details have been omitted.</p>
<p><figure><a class="lightgallery" href="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/InventAvailabilityProvider.png" title="Image" data-thumbnail="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/InventAvailabilityProvider.png" data-sub-html="<h2>InventAvailabilityProvider</h2><p>Image</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/InventAvailabilityProvider.png"
            data-srcset="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/InventAvailabilityProvider.png, /2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/InventAvailabilityProvider.png 1.5x, /2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/InventAvailabilityProvider.png 2x"
            data-sizes="auto"
            alt="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/InventAvailabilityProvider.png" width="1023" height="640" />
    </a><figcaption class="image-caption">InventAvailabilityProvider</figcaption>
    </figure></p>
<h2 id="4-reservation-strategies">4. Reservation strategies</h2>
<p>To control the levels of the reservation hierarchy at which reservations are made, the system uses the concept of a reservation strategy. A reservation strategy determines the outcome of a reservation, and the dimensions that are used to make the reservation. Reservation strategies are implemented in the code and are not currently user-configurable.</p>
<p>Each reservation strategy determines the level that the reservation should be made on. If the dimensions that are passed to the reservation system do not cover all the dimensions to the level defined by the strategy, the reservation system queries the on-hand availability until the required level; then, based on the results of this query, it does the reservation so that it covers all the required dimensions.</p>
<p>The reservation strategies that are chosen for a reservation depend on multiple factors, such as the following:
• Warehouse setup
• Order type</p>
<p>The following table describes the reservation strategies that the reservation system uses.</p>
<table>
<thead>
<tr>
<th>Reservation strategy</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>None</td>
<td>The reservation is made on the dimensions that are passed, if possible. This strategy is</td>
</tr>
<tr>
<td></td>
<td>used by inventory blocking, and lets you make reservations on, for example, the site</td>
</tr>
<tr>
<td></td>
<td>level or the warehouse level.</td>
</tr>
<tr>
<td>All</td>
<td>The reservation is made on all of the dimensions in the reservation hierarchy. This</td>
</tr>
<tr>
<td></td>
<td>strategy is used, for example, for transfer journals, or for warehouses that have not</td>
</tr>
<tr>
<td></td>
<td>been enabled for warehouse management processes.</td>
</tr>
<tr>
<td>Above location</td>
<td>The reservation is made only on the locations above the location level. This strategy is</td>
</tr>
<tr>
<td></td>
<td>used, for example, for sales and transfer orders when reservations are made in a</td>
</tr>
<tr>
<td></td>
<td>warehouse that is enabled for warehouse management processes.</td>
</tr>
<tr>
<td>All not allowed blank</td>
<td>The reservation is made on the first lowest level that does not allow for blank issue for</td>
</tr>
<tr>
<td></td>
<td>the inventory dimensions. This strategy enables automatic reservations on non-licenseplate-controlled locations.</td>
</tr>
<tr>
<td>Batch level</td>
<td>This strategy is applied for items for which the Batch number dimension is selected and</td>
</tr>
<tr>
<td></td>
<td>positioned above the Location dimension in the reservation hierarchy. This strategy is</td>
</tr>
<tr>
<td></td>
<td>used when only reservations that are reserved ordered can be made. In that case, a</td>
</tr>
<tr>
<td></td>
<td>reservation until the batch level is attempted.</td>
</tr>
</tbody>
</table>
<p>The reservation system supports multiple reservation strategies in sequential order when reservations are made. For example, the system uses the All and All not allowed blank strategies to make reservations for transfer journals.</p>
<h2 id="5-details-about-the-implementation-of-reservation-strategies">5. Details about the implementation of reservation strategies</h2>
<p>The following illustration shows the classes that are used to implement the reservation strategies, and the main consumers of the classes. Note that, for the sake of simplicity, some details have been omitted.</p>
<p><figure><a class="lightgallery" href="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/reservation-strategies.png" title="Image" data-thumbnail="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/reservation-strategies.png" data-sub-html="<h2>reservation-strategies</h2><p>Image</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/reservation-strategies.png"
            data-srcset="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/reservation-strategies.png, /2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/reservation-strategies.png 1.5x, /2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/reservation-strategies.png 2x"
            data-sizes="auto"
            alt="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/reservation-strategies.png" width="1475" height="701" />
    </a><figcaption class="image-caption">reservation-strategies</figcaption>
    </figure></p>
<p>The implementation is easy to extend, because the instantiation uses the <code>SysExtension</code> framework.</p>
<h2 id="6-synchronization-of-dimensions-between-receipts-and-issues">6. Synchronization of dimensions between receipts and issues</h2>
<p>When an inventory transaction is marked or reserved ordered, the inventory dimensions are typically synchronized between <em>receipts</em> and <em>issues</em>. For example, when a purchase order that was created based on a sales order is modified or received, the dimensions are transferred to the inventory transactions for the sales line.</p>
<p>For items that are enabled for warehouse management processes, the synchronization differs from the standard behavior. When work must be created, the source line transactions can be reserved only until the level above the location level. If all dimensions are synchronized, work cannot be created. Therefore, dimensions above the location level are not synchronized for all scenarios.</p>
<p>If the item and warehouse are enabled for warehouse management processes, and if the issue type is a type that can generate work, such as a sales line, only dimensions above the location level are synchronized. This means that if an item uses batch numbers, and the batch number is placed below the location in the reservation hierarchy, the batch number is not synchronized from receipt to issue transactions.</p>
<h2 id="7-details-about-the-implementation-of-synchronization-between-receipts-and-issues">7. Details about the implementation of synchronization between receipts and issues</h2>
<p>The logic that determines how the dimensions are synchronized is implemented in the following methods on the <strong>inventMovement</strong> class:</p>
<ul>
<li><code>getInventDimForReservedTransPhysChange</code></li>
<li><code>getInventDimForIssueTransFromReceipt</code></li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on November 9, 2022</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://nuxulu.com/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/" data-title="Reservation and on-hand inventory in warehouse management" data-hashtags="on-hand,inventory,warehouse management"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://nuxulu.com/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/" data-hashtag="on-hand"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://nuxulu.com/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on WhatsApp" data-sharer="whatsapp" data-url="https://nuxulu.com/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/" data-title="Reservation and on-hand inventory in warehouse management" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://nuxulu.com/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/" data-title="Reservation and on-hand inventory in warehouse management"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://nuxulu.com/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/" data-title="Reservation and on-hand inventory in warehouse management"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://nuxulu.com/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/" data-title="Reservation and on-hand inventory in warehouse management"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/on-hand/">on-hand</a>,&nbsp;<a href="/tags/inventory/">inventory</a>,&nbsp;<a href="/tags/warehouse-management/">warehouse management</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/2022-10-27-how-to-get-d365-azure-blob-storage-str/" class="prev" rel="prev" title="How to get FinOps Azure storage blob connection string"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>How to get FinOps Azure storage blob connection string</a>
            <a href="/2022-11-13-extend-on-hand-entities-fin-ops/" class="next" rel="next" title="Extend on-hand inventory entities FinOps">Extend on-hand inventory entities FinOps<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Have a nice day!</div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2013 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/series/" target="_blank">Max Nguyen</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"><script type="text/javascript" src="https://https-dynamics365-github-io.disqus.com/embed.js" defer></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":300},"comment":{},"lightgallery":true,"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"lunr"},"twemoji":true};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'UA-57379422-3', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-57379422-3" async></script></body>
</html>
