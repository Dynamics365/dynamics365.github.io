---
layout: post
title: X++ Performance tips
date: 2015-02-12 11:13:00.000000000 +07:00
type: post
published: true
status: publish
categories: []
tags:
- " performance"
- dynamics ax 2012
- tips
meta:
  _publicize_pending: '1'
author:
  login: luannx
  email: luan52@outlook.com
  display_name: luannx
  first_name: ''
  last_name: ''
---
<p class="MsoNormal" style="background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><b style="line-height:15.6pt;"><span style="font-size:10pt;font-family:&quot;color:#444444;">Tip 1: Measure execution time of your code</span></b></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><span style="font-size:10pt;font-family:&quot;color:#444444;"><br />
Measuring is knowing. Before you start changing code, make sure you have a set<br />
of data you can keep reusing for your tests. Measure the performance of your<br />
code on that data after each change in code so you know the impact of your<br />
changes.</span></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><span style="font-size:10pt;font-family:&quot;color:#444444;">One<br />
way to do this is by using the Winapi::getTickCount() (or<br />
WinApiServer::getTickCount() if your code runs on server) method.</span></p>
<p class="MsoNormal" style="margin-bottom:0;margin-bottom:.0001pt;line-height:16.8pt;background:#F1F1F1;"><span style="font-size:10pt;font-family:&quot;color:#2060A0;">static</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#2060A0;">void</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">KlForTickCountSample</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:black;">Args _args</span><span style="font-size:10pt;font-family:&quot;color:black;">)</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
</span><span style="font-size:10pt;font-family:&quot;color:black;">{</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#2060A0;">int</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">ticks;<br />
&nbsp; &nbsp; ;</p>
<p>&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><i><span style="font-size:10pt;font-family:&quot;color:#406040;">// get the tickcount before the process starts</span></i><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp; ticks</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;=&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">winapi</span><span style="font-size:10pt;font-family:&quot;color:black;">::</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">getTickCount</span><span style="font-size:10pt;font-family:&quot;color:black;">()</span><span style="font-size:10pt;font-family:&quot;color:black;">;<br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><i><span style="font-size:10pt;font-family:&quot;color:#406040;">// start the process</span></i><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:teal;">sleep</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:#0080A0;">2000</span><span style="font-size:10pt;font-family:&quot;color:black;">)</span><span style="font-size:10pt;font-family:&quot;color:black;">;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><i><span style="font-size:10pt;font-family:&quot;color:#406040;">// simulate 2 seconds of processing</span></i><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><i><span style="font-size:10pt;font-family:&quot;color:#406040;">// compare tickcount</span></i><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp; ticks</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;=&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">winapi</span><span style="font-size:10pt;font-family:&quot;color:black;">::</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">getTickCount</span><span style="font-size:10pt;font-family:&quot;color:black;">()&nbsp;-&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">ticks;<br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><i><span style="font-size:10pt;font-family:&quot;color:#406040;">// display result</span></i><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp; info</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:teal;">strfmt</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:#C03030;">'Number of ticks: %1'</span><span style="font-size:10pt;font-family:&quot;color:black;">,&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">ticks</span><span style="font-size:10pt;font-family:&quot;color:black;">))</span><span style="font-size:10pt;font-family:&quot;color:black;">;<br />
</span><span style="font-size:10pt;font-family:&quot;color:black;">}</span></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><b style="line-height:15.6pt;"><span style="font-size:10pt;font-family:&quot;color:#444444;"><br /></span></b></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><b style="line-height:15.6pt;"><span style="font-size:10pt;font-family:&quot;color:#444444;">Tip 2: limit the number of loops</span></b></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><span style="font-size:10pt;font-family:&quot;color:#444444;"><br />
A LOT of time goes into loops. If you have a performance problem, start looking<br />
for loops. Code can run really fast, but it can get slow when it is executed<br />
too many time, eg, in a loop.</span></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><b><span style="font-size:10pt;font-family:&quot;color:#444444;">Tip 3: avoid ‘if’ in ‘while select’</span></b><span style="font-size:10pt;font-family:&quot;color:#444444;"><br />
When there is a ‘if’ in a ‘while select’, see if you can rewrite it a a where<br />
statement in your select. Don’t be affraid use a join either. Consider the<br />
following example:</span></p>
<p class="MsoNormal" style="margin-bottom:0;margin-bottom:.0001pt;line-height:16.8pt;background:#F1F1F1;"><span style="font-size:10pt;font-family:&quot;color:#2060A0;">static</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#2060A0;">void</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">KlForIfInLoop</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:black;">Args _args</span><span style="font-size:10pt;font-family:&quot;color:black;">)</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
</span><span style="font-size:10pt;font-family:&quot;color:black;">{</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp; VendTable vendTable;<br />
&nbsp; &nbsp; ;</p>
<p>&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><i><span style="font-size:10pt;font-family:&quot;color:#406040;">// usually slower</span></i><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#2060A0;">while</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:teal;">select</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">vendTable<br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;{</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#2060A0;">if</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:black;">vendTable.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">VendGroup</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;==&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#C03030;">'VG1'</span><span style="font-size:10pt;font-family:&quot;color:black;">)</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;{</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; info</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:black;">vendTable.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">AccountNum</span><span style="font-size:10pt;font-family:&quot;color:black;">)</span><span style="font-size:10pt;font-family:&quot;color:black;">;<br />
&nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;}</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;}</span><span style="font-size:10pt;font-family:&quot;color:black;"></p>
<p>&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><i><span style="font-size:10pt;font-family:&quot;color:#406040;">// usually faster</span></i><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#2060A0;">while</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:teal;">select</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">vendTable<br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:teal;">where</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">vendTable.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">VendGroup</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;==&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#C03030;">'VG1'</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;{</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp; &nbsp; &nbsp; info</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:black;">vendTable.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">AccountNum</span><span style="font-size:10pt;font-family:&quot;color:black;">)</span><span style="font-size:10pt;font-family:&quot;color:black;">;<br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;}</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
</span><span style="font-size:10pt;font-family:&quot;color:black;">}</span><span style="font-size:10pt;font-family:&quot;color:black;"></span></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><b><span style="font-size:10pt;font-family:&quot;color:#444444;">Tip 4: avoid double use of table methods</span></b><span style="font-size:10pt;font-family:&quot;color:#444444;"><br />
Using table methods a lot can get really slow if you do it wrong.</span></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><span style="font-size:10pt;font-family:&quot;color:#444444;">Consider<br />
the following example:</span></p>
<p class="MsoNormal" style="margin-bottom:0;margin-bottom:.0001pt;line-height:16.8pt;background:#F1F1F1;"><span style="font-size:10pt;font-family:&quot;color:#2060A0;">static</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#2060A0;">void</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">klForTableMethodsSlow</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:black;">Args _args</span><span style="font-size:10pt;font-family:&quot;color:black;">)</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
</span><span style="font-size:10pt;font-family:&quot;color:black;">{</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp; SalesLine salesLine;<br />
&nbsp; &nbsp; InventDim inventDim;<br />
&nbsp; &nbsp; ;<br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><i><span style="font-size:10pt;font-family:&quot;color:#406040;">// select a salesline</span></i><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:teal;">select</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:teal;">firstonly</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">salesLine;<br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp; inventDim.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">InventColorId</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;=&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">salesLine.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">inventDim</span><span style="font-size:10pt;font-family:&quot;color:black;">()</span><span style="font-size:10pt;font-family:&quot;color:black;">.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">InventColorId</span><span style="font-size:10pt;font-family:&quot;color:black;">;<br />
&nbsp; &nbsp; inventDim.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">InventSizeId</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">=&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">salesLine.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">inventDim</span><span style="font-size:10pt;font-family:&quot;color:black;">()</span><span style="font-size:10pt;font-family:&quot;color:black;">.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">InventSizeId</span><span style="font-size:10pt;font-family:&quot;color:black;">;<br />
&nbsp; &nbsp; inventDim.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">inventBatchId</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;=&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">salesLine.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">inventDim</span><span style="font-size:10pt;font-family:&quot;color:black;">()</span><span style="font-size:10pt;font-family:&quot;color:black;">.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">inventBatchId</span><span style="font-size:10pt;font-family:&quot;color:black;">;<br />
</span><span style="font-size:10pt;font-family:&quot;color:black;">}</span><span style="font-size:10pt;font-family:&quot;color:black;"></span></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><span style="font-size:10pt;font-family:&quot;color:#444444;">This<br />
example code looks nice, but there’s a problem.<br />
The salesLine.inventDim() method contains the following:</span></p>
<p class="MsoNormal" style="margin-bottom:0;margin-bottom:.0001pt;line-height:16.8pt;background:#F1F1F1;"><span style="font-size:10pt;font-family:&quot;color:black;">InventDim inventDim</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:#2060A0;">boolean</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;_forUpdate</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;=&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#2060A0;">false</span><span style="font-size:10pt;font-family:&quot;color:black;">)</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
</span><span style="font-size:10pt;font-family:&quot;color:black;">{</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#2060A0;">return</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">InventDim</span><span style="font-size:10pt;font-family:&quot;color:black;">::</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">find</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:black;">this.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">InventDimId</span><span style="font-size:10pt;font-family:&quot;color:black;">,&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">_forUpdate</span><span style="font-size:10pt;font-family:&quot;color:black;">)</span><span style="font-size:10pt;font-family:&quot;color:black;">;<br />
</span><span style="font-size:10pt;font-family:&quot;color:black;">}</span><span style="font-size:10pt;font-family:&quot;color:black;"></span></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><span style="font-size:10pt;font-family:&quot;color:#444444;">This<br />
means that the invendDim record is read three times from the database.<br />
It is better to declare the inventDim record locally and only retrieve it once:</span></p>
<p class="MsoNormal" style="margin-bottom:0;margin-bottom:.0001pt;line-height:16.8pt;background:#F1F1F1;"><span style="font-size:10pt;font-family:&quot;color:#2060A0;">static</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#2060A0;">void</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">klForTableMethodsFast</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:black;">Args _args</span><span style="font-size:10pt;font-family:&quot;color:black;">)</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
</span><span style="font-size:10pt;font-family:&quot;color:black;">{</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp; SalesLine salesLine;<br />
&nbsp; &nbsp; InventDim inventDim;<br />
&nbsp; &nbsp; InventDim inventDimLoc;<br />
&nbsp; &nbsp; ;<br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><i><span style="font-size:10pt;font-family:&quot;color:#406040;">// select a salesline</span></i><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:teal;">select</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:teal;">firstonly</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">salesLine;<br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp; inventDimLoc</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;=&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">salesLine.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">inventDim</span><span style="font-size:10pt;font-family:&quot;color:black;">()</span><span style="font-size:10pt;font-family:&quot;color:black;">;<br />
&nbsp; &nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp; inventDim.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">InventColorId</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;=&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">inventDimLoc.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">InventColorId</span><span style="font-size:10pt;font-family:&quot;color:black;">;<br />
&nbsp; &nbsp; inventDim.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">InventSizeId</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">=&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">inventDimLoc.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">InventSizeId</span><span style="font-size:10pt;font-family:&quot;color:black;">;<br />
&nbsp; &nbsp; inventDim.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">inventBatchId</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;=&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">inventDimLoc.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">inventBatchId</span><span style="font-size:10pt;font-family:&quot;color:black;">;<br />
</span><span style="font-size:10pt;font-family:&quot;color:black;">}</span><span style="font-size:10pt;font-family:&quot;color:black;"></span></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><b><span style="font-size:10pt;font-family:&quot;color:#444444;">Tip 5: Don’t put too much code on tables</span></b><span style="font-size:10pt;font-family:&quot;color:#444444;"><br />
Code on tables is usually fast, but things can get slow if you use it to much.<br />
Say you have a table with an InventDimId field. If you have 5 methods that need<br />
the InventDim record, because you don’t have a classDeclaration method on your<br />
table, you need to call this function 5 times, once in every method:</span></p>
<p class="MsoNormal" style="margin-bottom:0;margin-bottom:.0001pt;line-height:16.8pt;background:#F1F1F1;"><span style="font-size:10pt;font-family:&quot;color:black;">InventDim</span><span style="font-size:10pt;font-family:&quot;color:black;">::</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">find</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:black;">this.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">inventDim</span><span style="font-size:10pt;font-family:&quot;color:black;">)</span><span style="font-size:10pt;font-family:&quot;color:black;"></span></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><span style="font-size:10pt;font-family:&quot;color:#444444;">.<br />
When you put these methods on a class, you could optimise it by fetching the<br />
record only once and storing it in the classDeclaration, or better, passing it<br />
as a parameter to your methods.</span></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><span style="font-size:10pt;font-family:&quot;color:#444444;">An<br />
other example is fetching parameters from parameter tables, eg InventParameters::find().<br />
On a table, you have to fetch it each time you call a method. In a class, you<br />
would probably optimize your code to only fetch the parameter record once.</span></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><b><span style="font-size:10pt;font-family:&quot;color:#444444;">Tip 6: Use the fastest code</span></b><span style="font-size:10pt;font-family:&quot;color:#444444;"><br />
For some tasks, there is ‘special code’ that is faster than the code you would<br />
normally write.<br />
For example:</span></p>
<p class="MsoNormal" style="margin-bottom:0;margin-bottom:.0001pt;line-height:16.8pt;background:#F1F1F1;"><i><span style="font-size:10pt;font-family:&quot;color:#406040;">// slower</span></i><span style="font-size:10pt;font-family:&quot;color:black;"><br />
</span><span style="font-size:10pt;font-family:&quot;color:#2060A0;">while</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:teal;">select</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:teal;">forupdate</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">custTable<br />
</span><span style="font-size:10pt;font-family:&quot;color:teal;">where</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">custTable.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">custGroup</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;==&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#C03030;">'TST'</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
</span><span style="font-size:10pt;font-family:&quot;color:black;">{</span><span style="font-size:10pt;font-family:&quot;color:black;"><br />
&nbsp; &nbsp; custTable.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">delete</span><span style="font-size:10pt;font-family:&quot;color:black;">()</span><span style="font-size:10pt;font-family:&quot;color:black;">;<br />
</span><span style="font-size:10pt;font-family:&quot;color:black;">}</span><span style="font-size:10pt;font-family:&quot;color:black;"></p>
<p></span><i><span style="font-size:10pt;font-family:&quot;color:#406040;">// faster</span></i><span style="font-size:10pt;font-family:&quot;color:black;"><br />
</span><span style="font-size:10pt;font-family:&quot;color:teal;">delete_from</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">custTable<br />
</span><span style="font-size:10pt;font-family:&quot;color:teal;">where</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:black;">custTable.</span><span style="font-size:10pt;font-family:&quot;color:#0080FF;">custGroup</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;==&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#C03030;">'TST'</span><span style="font-size:10pt;font-family:&quot;color:black;">;</span></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><span style="font-size:10pt;font-family:&quot;color:#444444;">The<br />
same applies to update_recordset for updating records.</span></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><span style="font-size:10pt;font-family:&quot;color:#444444;">Also,<br />
when adding values to the end of a container</span></p>
<p class="MsoNormal" style="margin-bottom:0;margin-bottom:.0001pt;line-height:16.8pt;background:#F1F1F1;"><span style="font-size:10pt;font-family:&quot;color:black;">cont</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;+=&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#C03030;">"a value"</span><span style="font-size:10pt;font-family:&quot;color:black;">;</span></p>
<p class="MsoNormal" style="margin-bottom:24pt;line-height:15.6pt;background-image:initial;background-attachment:initial;background-size:initial;background-origin:initial;background-clip:initial;background-position:initial;background-repeat:initial;"><span style="font-size:10pt;font-family:&quot;color:#444444;">is<br />
faster than</span></p>
<p class="MsoNormal" style="margin-bottom:0;margin-bottom:.0001pt;line-height:16.8pt;background:#F1F1F1;"><span style="font-size:10pt;font-family:&quot;color:black;">cont</span><span style="font-size:10pt;font-family:&quot;color:black;">&nbsp;=&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:teal;">conins</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:black;">cont</span><span style="font-size:10pt;font-family:&quot;color:black;">,&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:teal;">conlen</span><span style="font-size:10pt;font-family:&quot;color:black;">(</span><span style="font-size:10pt;font-family:&quot;color:black;">cont</span><span style="font-size:10pt;font-family:&quot;color:black;">),&nbsp;</span><span style="font-size:10pt;font-family:&quot;color:#C03030;">"a value"</span><span style="font-size:10pt;font-family:&quot;color:black;">)</span><span style="font-size:10pt;font-family:&quot;color:black;">;</span></p>
<p><b><span style="font-size:10pt;line-height:115%;font-family:&quot;color:#444444;"><br /></span></b></p>
<p><b><span style="font-size:10pt;line-height:115%;font-family:&quot;color:#444444;">Tip 7: Every optimization counts</span></b><span style="font-size:10pt;line-height:115%;font-family:&quot;color:#444444;"><br />
Remember that every optimization you do to you code counts, even if it’s a<br />
little one. Small performance tweaks can have a huge effect once you process<br />
large quantities of data. So don’t be lazy, and optimize :-).</span></p>
<p><span style="line-height:1.42857143;"><br /></span></p>
<p><span style="font-size:10pt;line-height:15.333332061768px;font-family:Helvetica, sans-serif;color:rgb(68,68,68);">Share from&nbsp;</span><span style="color:rgb(68,68,68);font-family:Helvetica, sans-serif;font-size:13.333333015442px;line-height:15.333332061768px;">http://www.artofcreation.be/</span></p>
<p></p>
