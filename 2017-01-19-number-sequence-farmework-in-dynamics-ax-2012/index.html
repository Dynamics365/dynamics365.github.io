<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Number sequence farmework overview in Dynamics AX 2012 - Dynamics 365 Finance & Operations | nuxulu.com</title><meta name=Description content="Dynamics 365 Finance & Operations"><meta property="og:title" content="Number sequence farmework overview in Dynamics AX 2012"><meta property="og:description" content="
        
    number-sequence-overview
    
For this demo, I will create New module along with NumberSequence, about creating Number Sequence without module you also use same steps just leave some steps base on Design picture above.
1. ETD
Create ETD ContosoId extends num datatype.
2. Table
Create Contoso Table with ContosoId field.
3. Enum
Create a new enum value Contoso in BaseEnum NumberSeqModule.
This value will be used to link number sequence to the module and to restrict displayed number sequence by module in Form."><meta property="og:type" content="article"><meta property="og:url" content="https://nuxulu.com/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/"><meta property="og:image" content="https://nuxulu.com/Icon/mstile-150x150.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-01-19T00:00:00+00:00"><meta property="article:modified_time" content="2017-01-19T00:00:00+00:00"><meta property="og:site_name" content="Dynamics 365 Finance & Operations"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nuxulu.com/Icon/mstile-150x150.png"><meta name=twitter:title content="Number sequence farmework overview in Dynamics AX 2012"><meta name=twitter:description content="
        
    number-sequence-overview
    
For this demo, I will create New module along with NumberSequence, about creating Number Sequence without module you also use same steps just leave some steps base on Design picture above.
1. ETD
Create ETD ContosoId extends num datatype.
2. Table
Create Contoso Table with ContosoId field.
3. Enum
Create a new enum value Contoso in BaseEnum NumberSeqModule.
This value will be used to link number sequence to the module and to restrict displayed number sequence by module in Form."><meta name=application-name content="Dynamics 365 Finance & Operations"><meta name=apple-mobile-web-app-title content="Dynamics 365 Finance & Operations"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=/Icon/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://nuxulu.com/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/><link rel=prev href=https://nuxulu.com/2017-01-19-overview-delete-action-in-dyanmics-ax-2012/><link rel=next href=https://nuxulu.com/2017-03-29-how-to-create-main-menu-in-dynamics-ax-2012/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><meta name=google-site-verification content="f08c47fec0942fa0"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Number sequence farmework overview in Dynamics AX 2012","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/nuxulu.com\/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012\/"},"image":[{"@type":"ImageObject","url":"https:\/\/nuxulu.com\/images\/Apple-Devices-Preview.png","width":3200,"height":2048}],"genre":"posts","keywords":"X\u002b\u002b, numbersequence","wordcount":1387,"url":"https:\/\/nuxulu.com\/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012\/","datePublished":"2017-01-19T00:00:00+00:00","dateModified":"2017-01-19T00:00:00+00:00","publisher":{"@type":"Organization","name":"xxxx","logo":{"@type":"ImageObject","url":"https:\/\/nuxulu.com\/images\/avatar.png","width":528,"height":560}},"author":{"@type":"Person","name":"Max Nguyen"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"dark"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3534873375492458" crossorigin=anonymous></script>
<a href=/ title="Dynamics 365 Finance & Operations | nuxulu.com"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/Icon/favicon-32x32.png data-srcset="/Icon/favicon-32x32.png, /Icon/favicon-32x32.png 1.5x, /Icon/favicon-32x32.png 2x" data-sizes=auto alt=/Icon/favicon-32x32.png title=/Icon/favicon-32x32.png><span class=header-title-pre> </span>Dynamics 365 Finance & Operations</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=/finopsnews/>D365 Feed </a><a class=menu-item href=/erd/default.htm>AX ERD </a><a class=menu-item href=/posts/index.xml>RSS </a><a class=menu-item href=/lab/>Labs </a><a class=menu-item href=/about/>About me </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3534873375492458" crossorigin=anonymous></script>
<a href=/ title="Dynamics 365 Finance & Operations | nuxulu.com"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/Icon/favicon-32x32.png data-srcset="/Icon/favicon-32x32.png, /Icon/favicon-32x32.png 1.5x, /Icon/favicon-32x32.png 2x" data-sizes=auto alt=/Icon/favicon-32x32.png title=/Icon/favicon-32x32.png><span class=header-title-pre> </span>Dynamics 365 Finance & Operations</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/finopsnews/ title>D365 Feed</a><a class=menu-item href=/erd/default.htm title>AX ERD</a><a class=menu-item href=/posts/index.xml title>RSS</a><a class=menu-item href=/lab/ title>Labs</a><a class=menu-item href=/about/ title>About me</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Number sequence farmework overview in Dynamics AX 2012</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/about/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Max Nguyen</a></span>&nbsp;<span class=post-category>included in <a href=/categories/ax2012/><i class="far fa-folder fa-fw" aria-hidden=true></i>AX2012</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime="January 19, 2017">January 19, 2017</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1387 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;7 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1-etd>1. ETD</a></li><li><a href=#2-table>2. Table</a></li><li><a href=#3-enum>3. Enum</a></li><li><a href=#4-numberseqmodule-class>4. NumberSeqModule Class</a></li><li><a href=#5-parameters-table-and-form>5. Parameters Table and Form</a><ul><li><a href=#51-create-contosoparameters-table>5.1. Create <code>ContosoParameters</code> Table</a></li><li><a href=#52-create-contosoparameters-form>5.2. Create <code>ContosoParameters</code> form</a></li></ul></li><li><a href=#6-how-to-use-on-table>6. How to use on Table</a></li><li><a href=#7-how-to-use-on-form>7. How to use on Form</a></li><li><a href=#8-optional-method>8. Optional method</a></li><li><a href=#9-testing>9. Testing</a></li></ul></nav></div></div><div class=content id=content><p><figure><a class=lightgallery href=/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/number-sequence-overview.png title=number-sequence-overview data-thumbnail=/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/number-sequence-overview.png data-sub-html="<h2>number-sequence-overview</h2><p>number-sequence-overview</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/number-sequence-overview.png data-srcset="/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/number-sequence-overview.png, /2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/number-sequence-overview.png 1.5x, /2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/number-sequence-overview.png 2x" data-sizes=auto alt=/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/number-sequence-overview.png width=799 height=587></a><figcaption class=image-caption>number-sequence-overview</figcaption></figure></p><p>For this demo, I will create New module along with NumberSequence, about creating Number Sequence <em>without</em> module you also use same steps just leave some steps base on Design picture above.</p><h2 id=1-etd>1. ETD</h2><p>Create ETD <code>ContosoId</code> extends <code>num</code> datatype.</p><h2 id=2-table>2. Table</h2><p>Create <code>Contoso</code> Table with <code>ContosoId</code> field.</p><h2 id=3-enum>3. Enum</h2><p>Create a new enum value <code>Contoso</code> in BaseEnum <code>NumberSeqModule</code>.</p><p>This value will be used to link number sequence to the module and to restrict displayed number sequence by module in Form.</p><h2 id=4-numberseqmodule-class>4. NumberSeqModule Class</h2><p>Create <code>NumberSeqModuleXXX</code> class</p><p>Create a new <code>NumberSeqModuleXXX</code> class, such as <code>NumberSeqModuleContoso</code>, which extends the <code>NumberSeqApplicationModule</code> class. The sample code for creating this class is as follows:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>NumberSeqModuleContoso</span> <span class=n>extends</span> <span class=n>NumberSeqApplicationModule</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>protected</span> <span class=k>void</span> <span class=n>loadModule</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>NumberSeqDatatype</span> <span class=n>datatype</span> <span class=p>=</span> <span class=n>NumberSeqDatatype</span><span class=p>::</span><span class=n>construct</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=cm>/* Contoso Id */</span>
</span></span><span class=line><span class=cl>	<span class=n>datatype</span><span class=p>.</span><span class=n>parmDatatypeId</span><span class=p>(</span><span class=n>extendedtypenum</span><span class=p>(</span><span class=n>ContosoId</span><span class=p>));</span>
</span></span><span class=line><span class=cl>	<span class=n>datatype</span><span class=p>.</span><span class=n>parmReferenceHelp</span><span class=p>(</span><span class=s>&#34;ContosoId&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=n>datatype</span><span class=p>.</span><span class=n>parmWizardIsContinuous</span><span class=p>(</span><span class=k>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=n>datatype</span><span class=p>.</span><span class=n>parmWizardIsManual</span><span class=p>(</span><span class=n>NoYes</span><span class=p>::</span><span class=n>No</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=n>datatype</span><span class=p>.</span><span class=n>parmWizardIsChangeDownAllowed</span><span class=p>(</span><span class=n>NoYes</span><span class=p>::</span><span class=n>No</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=n>datatype</span><span class=p>.</span><span class=n>parmWizardIsChangeUpAllowed</span><span class=p>(</span><span class=n>NoYes</span><span class=p>::</span><span class=n>No</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=n>datatype</span><span class=p>.</span><span class=n>parmWizardHighest</span><span class=p>(</span><span class=m>999999</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=n>datatype</span><span class=p>.</span><span class=n>addParameterType</span><span class=p>(</span><span class=n>NumberSeqParameterType</span><span class=p>::</span><span class=n>DataArea</span><span class=p>,</span> <span class=k>true</span><span class=p>,</span> <span class=k>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>this</span><span class=p>.</span><span class=n>create</span><span class=p>(</span><span class=n>datatype</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=n>NumberSeqModule</span> <span class=n>numberSeqModule</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=n>NumberSeqModule</span><span class=p>::</span><span class=n>Contoso</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Use of the <code>DataArea</code> segment in <em>Step 4</em> to describe the default segment for the extended data types used for <code>ContosoId</code>.</p><p>Note In <strong>Microsoft Dynamics AX 2009</strong>, number sequence references could be initialized by restarting the Application Object Server (AOS). In <strong>Microsoft Dynamics AX 2012</strong>, the initialization of references to populate the <code>NumberSequenceDatatype</code> and <code>NumberSequenceParameterType</code> tables has moved to the initialization checklist. To initialize the newly created references, run a job that executes the <code>LoadModule</code> method likes below.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>static</span> <span class=k>void</span> <span class=n>loadNumSeq</span> <span class=p>(</span><span class=n>Args</span> <span class=n>_args</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>//define the class variable</span>
</span></span><span class=line><span class=cl>	<span class=n>NumberSeqModuleContoso</span> <span class=n>seqMod</span> <span class=p>=</span> <span class=k>new</span> <span class=n>NumberSeqModuleContoso</span> <span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=c1>//load the number sequences that were not generated</span>
</span></span><span class=line><span class=cl>	<span class=n>seqMod</span><span class=p>.</span><span class=n>load</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>You can also reinitialize all references by running a job that executes the <code>LoadAll</code> method in the <code>NumberSequenceModuleSetup</code> class. However, for reinitializing all references, you must ensure that there are no existing number sequences already defined in the system.</p><p>Then run the wizard in <em>Organization Administration > CommonForms > Numbersequences > Numbersequences > Generate > run the wizard</em>.</p><h2 id=5-parameters-table-and-form>5. Parameters Table and Form</h2><p>Create a Number sequences page in the parameters form of the new module.</p><p>You need to Create <code>ContosoParameters</code> Table along with form, See existing forms such as <code>CustParameters</code> or <code>LedgerParameters</code> for examples of the implementation.</p><p><em>These forms are using <strong>DetailsFormMaster</strong> form parten as Best Practice for Setup form.</em></p><h3 id=51-create-contosoparameters-table>5.1. Create <code>ContosoParameters</code> Table</h3><ul><li><p>Add field key, Extends from <code>ParametersKey</code></p></li><li><p>Properties on Field key Visible = false, AllowEdit = false, AllowEditOnCreate = false</p></li><li><p>Create index name Key with AllowDuplicate = No.</p></li><li><p>Set table properties.</p></li><li><p>TableContent = Default data</p></li><li><p>ConfigurationKey</p></li><li><p>CacheLookup = Found</p></li><li><p>TableGroup = Parameter</p></li><li><p>PrimaryKey = Key</p></li><li><p>ClusterKey = Key</p></li></ul><p>The sample code for creating method this table as below:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>void</span> <span class=n>delete</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>throw</span> <span class=n>error</span><span class=p>(</span><span class=s>&#34;@SYS23721&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>void</span> <span class=n>initValue</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=c1>// Key is set to mandatory so set it to 1</span>
</span></span><span class=line><span class=cl>	<span class=k>this</span><span class=p>.</span><span class=n>Key</span> <span class=p>=</span> <span class=m>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=n>ContosoParameters</span> <span class=n>find</span><span class=p>(</span><span class=n>boolean</span> <span class=n>_forupdate</span> <span class=p>=</span> <span class=k>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>ContosoParameters</span> <span class=n>parameter</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(</span><span class=n>_forupdate</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>parameter</span><span class=p>.</span><span class=n>selectForUpdate</span><span class=p>(</span><span class=n>_forupdate</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>select</span> <span class=n>firstonly</span> <span class=n>RecId</span> <span class=k>from</span> <span class=n>parameter</span>
</span></span><span class=line><span class=cl>		<span class=k>where</span> <span class=n>parameter</span><span class=p>.</span><span class=n>Key</span> <span class=p>==</span> <span class=m>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(!</span><span class=n>parameter</span> <span class=p>&amp;&amp;</span> <span class=p>!</span><span class=n>parameter</span><span class=p>.</span><span class=n>isTmp</span><span class=p>())</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Company</span><span class=p>::</span><span class=n>createParameter</span><span class=p>(</span><span class=n>parameter</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=n>parameter</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>client</span> <span class=n>server</span> <span class=k>static</span> <span class=n>NumberSeqModule</span> <span class=n>numberSeqModule</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=n>NumberSeqModule</span><span class=p>::</span><span class=n>Contoso</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=n>server</span> <span class=k>static</span> <span class=n>NumberSequenceReference</span> <span class=n>numRefContosoId</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>NumberSeqScopeFactory</span><span class=p>::</span><span class=n>CreateDataAreaScope</span><span class=p>(</span><span class=n>curext</span><span class=p>());</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=n>NumberSeqReference</span><span class=p>::</span><span class=n>findReference</span><span class=p>(</span><span class=n>extendedtypenum</span> <span class=p>(</span><span class=n>ContosoId</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=52-create-contosoparameters-form>5.2. Create <code>ContosoParameters</code> form</h3><p>Note This form can only be used for references that have a scope of DataArea. The administration forms described in the Setup and Administration of number sequences section can be used for references that have any scope. These forms can be found in <em>Organization Administration > Common > Number Sequences</em></p><p>The data source of Parameters form likes picture below, you can also refer to <code>CustParameters</code> form for design.</p><p><figure><a class=lightgallery href=/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/ContosoParameters.png title=ContosoParameters data-thumbnail=/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/ContosoParameters.png data-sub-html="<h2>ContosoParameters</h2><p>ContosoParameters</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/ContosoParameters.png data-srcset="/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/ContosoParameters.png, /2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/ContosoParameters.png 1.5x, /2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/ContosoParameters.png 2x" data-sizes=auto alt=/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/ContosoParameters.png width=291 height=325></a><figcaption class=image-caption>ContosoParameters</figcaption></figure></p><p>Code example for form methods:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>FormRun</span> <span class=n>extends</span> <span class=n>ObjectRun</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>NumberSeqReference</span>          <span class=n>numberSeqReference</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>boolean</span>                     <span class=n>runExecuteDirect</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>TmpIdRef</span>                    <span class=n>tmpIdRef</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>NumberSeqScope</span>              <span class=n>scope</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>NumberSeqApplicationModule</span>  <span class=n>numberSeqApplicationModule</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>container</span>                   <span class=n>numberSequenceModules</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>void</span> <span class=k>init</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>this</span><span class=p>.</span><span class=n>numberSeqPreInit</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=n>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=n>ContosoParameters</span><span class=p>::</span><span class=n>find</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=k>this</span><span class=p>.</span><span class=n>numberSeqPostInit</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>void</span> <span class=n>numberSeqPostInit</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>numberSequenceReference_ds</span><span class=p>.</span><span class=kt>object</span><span class=p>(</span><span class=n>fieldNum</span><span class=p>(</span><span class=n>NumberSequenceReference</span><span class=p>,</span> <span class=n>AllowSameAs</span><span class=p>)).</span><span class=n>visible</span><span class=p>(</span><span class=n>numberSeqApplicationModule</span><span class=p>.</span><span class=n>sameAsActive</span><span class=p>());</span>
</span></span><span class=line><span class=cl>	<span class=n>referenceSameAsLabel</span><span class=p>.</span><span class=n>visible</span><span class=p>(</span><span class=n>numberSeqApplicationModule</span><span class=p>.</span><span class=n>sameAsActive</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>void</span> <span class=n>numberSeqPreInit</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>runExecuteDirect</span>            <span class=p>=</span> <span class=k>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>numberSequenceModules</span>       <span class=p>=</span> <span class=p>[</span><span class=n>NumberSeqModule</span><span class=p>::</span><span class=n>Contoso</span><span class=p>];</span>
</span></span><span class=line><span class=cl>	<span class=n>numberSeqApplicationModule</span>  <span class=p>=</span> <span class=k>new</span> <span class=n>NumberSeqModuleContoso</span> <span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=n>scope</span>                       <span class=p>=</span> <span class=n>NumberSeqScopeFactory</span><span class=p>::</span><span class=n>createDataAreaScope</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=n>NumberSeqApplicationModule</span><span class=p>::</span><span class=n>createReferencesMulti</span><span class=p>(</span><span class=n>numberSequenceModules</span><span class=p>,</span> <span class=n>scope</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>tmpIdRef</span><span class=p>.</span><span class=n>setTmpData</span><span class=p>(</span><span class=n>NumberSequenceReference</span><span class=p>::</span><span class=n>configurationKeyTableMulti</span><span class=p>(</span><span class=n>numberSequenceModules</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Code example for <code>NumberSequenceReference</code> data source methods</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>void</span> <span class=n>removeFilter</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>runExecuteDirect</span> <span class=p>=</span> <span class=k>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>numbersequenceReference_ds</span><span class=p>.</span><span class=n>executeQuery</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>void</span> <span class=n>executeQuery</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(</span><span class=n>runExecuteDirect</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>else</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>runExecuteDirect</span> <span class=p>=</span> <span class=k>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=p>.</span><span class=n>queryRun</span><span class=p>(</span><span class=n>NumberSeqReference</span><span class=p>::</span><span class=n>buildQueryRunMulti</span><span class=p>(</span><span class=n>numberSequenceReference</span><span class=p>,</span>
</span></span><span class=line><span class=cl>															 <span class=n>tmpIdRef</span><span class=p>,</span>
</span></span><span class=line><span class=cl>															 <span class=n>numberSequenceTable</span><span class=p>,</span>
</span></span><span class=line><span class=cl>															 <span class=n>numberSequenceModules</span><span class=p>,</span>
</span></span><span class=line><span class=cl>															 <span class=n>scope</span><span class=p>));</span>
</span></span><span class=line><span class=cl>		<span class=n>numbersequenceReference_ds</span><span class=p>.</span><span class=n>research</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=6-how-to-use-on-table>6. How to use on Table</h2><p>Set number sequence in Contoso Table</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>private</span> <span class=k>void</span> <span class=n>setContosoId</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>NumberSeq</span> <span class=n>num</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>NumberSequenceReference</span> <span class=n>numberSequenceReference</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>numberSequenceReference</span> <span class=p>=</span> <span class=n>CVRParameters</span><span class=p>::</span><span class=n>numRefContosoId</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(</span><span class=n>numberSequenceReference</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>num</span> <span class=p>=</span> <span class=n>NumberSeq</span><span class=p>::</span><span class=n>newGetNum</span><span class=p>(</span><span class=n>numberSequenceReference</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=p>.</span><span class=n>Id</span> <span class=p>=</span> <span class=n>num</span><span class=p>.</span><span class=n>num</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Optional method – in case you don’t want to expose Number sequence on Form Level</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>public</span> <span class=k>void</span> <span class=n>initValue</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Initialise the title id</span>
</span></span><span class=line><span class=cl>	<span class=k>this</span><span class=p>.</span> <span class=n>setContosoId</span> <span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>void</span> <span class=n>insert</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span><span class=p>(!</span><span class=k>this</span><span class=p>.</span><span class=n>Id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=p>.</span> <span class=n>setContosoId</span> <span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>From now on you can create new record in Contoso Table with number sequence.</p><h2 id=7-how-to-use-on-form>7. How to use on Form</h2><p>How to use on form level (In case you don’t want to expose NS in Table Level)</p><ul><li>In the class declaration of the form that will be accessing data, add a variable declaration for the number sequence handler. The following example shows the variable definition for a number sequence handler.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>FormRun</span> <span class=n>extends</span> <span class=n>ObjectRun</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>NumberSeqFormHandler</span> <span class=n>numberSeqFormHandlerContosoId</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>Add the <code>NumberSeqFormHandler</code> method to the form. The code in this method will create an instance of the number sequence form handler and return it.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>public</span> <span class=n>NumberSeqFormHandler</span> <span class=n>numSeqFormHandlerContosoId</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(!</span><span class=n>numberSeqFormHandlerContosoId</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>numberSeqFormHandlerContosoId</span> <span class=p>=</span> <span class=n>NumberSeqFormHandler</span><span class=p>::</span><span class=n>newForm</span><span class=p>(</span><span class=n>ContosoParameters</span><span class=p>::</span> <span class=n>numRefContosoId</span><span class=p>().</span><span class=n>NumberSequenceId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>															 <span class=n>element</span><span class=p>,</span>
</span></span><span class=line><span class=cl>															 <span class=n>Contoso_ds</span><span class=p>,</span>
</span></span><span class=line><span class=cl>															 <span class=n>fieldNum</span><span class=p>(</span><span class=n>Contoso</span><span class=p>,</span> <span class=n>ContosoId</span><span class=p>)</span>
</span></span><span class=line><span class=cl>															<span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=n>numberSeqFormHandlerContosoId</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>Add <strong>create, delete, and write</strong> methods to the data source of the table that contains the field for which the number sequence is being used. The following code examples show these methods that are added to the data source for the Contoso table to support the number sequence for the <code>ContosoId</code> field.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>public</span> <span class=k>void</span> <span class=n>create</span><span class=p>(</span><span class=n>boolean</span> <span class=n>_append</span> <span class=p>=</span> <span class=k>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>//before create, (ensure the number seuence has not run out of numbers)</span>
</span></span><span class=line><span class=cl>	<span class=n>element</span><span class=p>.</span><span class=n>numSeqFormHandlerContosoId</span><span class=p>().</span><span class=n>formMethodDataSourceCreatePre</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// start: inherited table code</span>
</span></span><span class=line><span class=cl>	<span class=c1>// we need to let the create happen so the user can</span>
</span></span><span class=line><span class=cl>	<span class=c1>// choose the type</span>
</span></span><span class=line><span class=cl>	<span class=n>super</span><span class=p>(</span><span class=n>_append</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>//number sequence, create action, (get next number)</span>
</span></span><span class=line><span class=cl>	<span class=n>element</span><span class=p>.</span><span class=n>numSeqFormHandlerContosoId</span><span class=p>().</span><span class=n>formMethodDataSourceCreate</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>void</span> <span class=n>delete</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>//release the number sequence value.</span>
</span></span><span class=line><span class=cl>	<span class=n>element</span><span class=p>.</span> <span class=n>numSeqFormHandlerContosoId</span><span class=p>().</span><span class=n>formMethodDataSourceDelete</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>//delete the record</span>
</span></span><span class=line><span class=cl>	<span class=n>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>void</span> <span class=n>write</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=n>element</span><span class=p>.</span> <span class=n>numSeqFormHandlerContosoId</span><span class=p>().</span><span class=n>formMethodDataSourceWrite</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=n>boolean</span> <span class=n>validateWrite</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>boolean</span>         <span class=n>ret</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>ret</span> <span class=p>=</span> <span class=n>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=n>ret</span> <span class=p>=</span> <span class=n>element</span><span class=p>.</span><span class=n>numberSeqFormHandler</span><span class=p>().</span><span class=n>formMethodDataSourceValidateWrite</span><span class=p>(</span><span class=n>ret</span><span class=p>)</span> <span class=p>&amp;&amp;</span> <span class=n>ret</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(</span><span class=n>ret</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Contoso</span><span class=p>.</span><span class=n>validateWrite</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=n>ret</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>Link</span> <span class=n>Active</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>void</span> <span class=n>linkActive</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>element</span><span class=p>.</span><span class=n>numberSeqFormHandler</span><span class=p>().</span><span class=n>formMethodDataSourceLinkActive</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=n>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=8-optional-method>8. Optional method</h2><p>Continuous sequence</p><p>To avoid having gaps for continuous sequence you should add this code to the delete of the table.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>public</span> <span class=k>void</span> <span class=n>delete</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=n>NumberSeq</span><span class=p>::</span><span class=n>releaseNumber</span><span class=p>(</span><span class=n>ContosoParameters</span><span class=p>::</span><span class=n>numRefContosoId</span><span class=p>().</span><span class=n>NumberSequenceId</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=n>ContosoId</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=9-testing>9. Testing</h2><p>Testing Number sequence by Job</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>static</span> <span class=k>void</span> <span class=n>Max_numberSeqRefCustAccount</span><span class=p>(</span><span class=n>Args</span> <span class=n>_args</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>NumberSequenceReference</span> <span class=n>numberSeqRefCustAccount</span> <span class=p>=</span> <span class=n>CustParameters</span><span class=p>::</span><span class=n>numRefCustAccount</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=n>NumberSeq</span>               <span class=n>numSeqCustAccount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>try</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl><span class=c1>//Use the TTS level to decide whether sequence is consumed or not.</span>
</span></span><span class=line><span class=cl>		<span class=n>ttsBegin</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=p>(</span><span class=n>numberSeqRefCustAccount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=n>numSeqCustAccount</span> <span class=p>=</span> <span class=n>NumberSeq</span><span class=p>::</span><span class=n>newGetNum</span><span class=p>(</span><span class=n>numberSeqRefCustAccount</span><span class=p>);</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span> <span class=p>(</span><span class=n>numSeqCustAccount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=n>info</span><span class=p>(</span><span class=n>numSeqCustAccount</span><span class=p>.</span><span class=n>num</span><span class=p>());</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=n>ttsCommit</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>catch</span> <span class=p>(</span><span class=n>Exception</span><span class=p>::</span><span class=n>Error</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>	   <span class=n>info</span><span class=p>(</span><span class=s>&#34;Caught &#39;Exception::Error&#39;.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Thank you for reading!</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on January 19, 2017</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://nuxulu.com/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/ data-title="Number sequence farmework overview in Dynamics AX 2012" data-hashtags=X++,numbersequence><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://nuxulu.com/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/ data-hashtag=X++><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://nuxulu.com/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://nuxulu.com/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/ data-title="Number sequence farmework overview in Dynamics AX 2012" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://nuxulu.com/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/ data-title="Number sequence farmework overview in Dynamics AX 2012"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://nuxulu.com/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/ data-title="Number sequence farmework overview in Dynamics AX 2012"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://nuxulu.com/2017-01-19-number-sequence-farmework-in-dynamics-ax-2012/ data-title="Number sequence farmework overview in Dynamics AX 2012"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/x++/>X++</a>,&nbsp;<a href=/tags/numbersequence/>numbersequence</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/2017-01-19-overview-delete-action-in-dyanmics-ax-2012/ class=prev rel=prev title="Overview delete action in Dyanmics AX 2012"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Overview delete action in Dyanmics AX 2012</a>
<a href=/2017-03-29-how-to-create-main-menu-in-dynamics-ax-2012/ class=next rel=next title="How to create main menu in Dynamics AX 2012">How to create main menu in Dynamics AX 2012<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=disqus_thread class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><a href=https://www.buymeacoffee.com/maxnguyen target=_blank><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a coffee&emoji=&slug=maxnguyen&button_colour=eacd61&font_colour=000000&font_family=Cookie&outline_colour=000000&coffee_colour=FFDD00"></a></div><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.110.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2013 - 2023</span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><script type=text/javascript src=https://https-dynamics365-github-io.disqus.com/embed.js defer></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:300},comment:{},lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"},twemoji:!0}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-57379422-3",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-57379422-3" async></script></body></html>