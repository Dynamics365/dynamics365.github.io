<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>X++ Performance tips - Dynamics 365 Finance & Operations | nuxulu.com</title><meta name=Description content="X++ Performance tips"><meta property="og:title" content="X++ Performance tips">
<meta property="og:description" content="X++ Performance tips"><meta property="og:type" content="article"><meta property="og:url" content="https://dynamics365.github.io/2015-02-12-x-performance-tips/"><meta property="og:image" content="https://dynamics365.github.io/Icon/mstile-150x150.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-02-12T00:00:00+00:00"><meta property="article:modified_time" content="2015-02-12T00:00:00+00:00"><meta property="og:site_name" content="Dynamics 365 Finance & Operations (Archive)"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dynamics365.github.io/Icon/mstile-150x150.png"><meta name=twitter:title content="X++ Performance tips"><meta name=twitter:description content="X++ Performance tips"><meta name=application-name content="Dynamics 365 Finance & Operations"><meta name=apple-mobile-web-app-title content="Dynamics 365 Finance & Operations"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=/Icon/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://dynamics365.github.io/2015-02-12-x-performance-tips/><link rel=prev href=https://dynamics365.github.io/2015-02-04-create-and-write-to-xml-file-in-dynamics-ax/><link rel=next href=https://dynamics365.github.io/2015-05-08-infographic-tieu-tien-khon-ngoan-theo-quy-tac-6-chiec-lo/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><meta name=google-site-verification content="f08c47fec0942fa0"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"X++ Performance tips","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/dynamics365.github.io\/2015-02-12-x-performance-tips\/"},"image":[{"@type":"ImageObject","url":"https:\/\/dynamics365.github.io\/images\/Apple-Devices-Preview.png","width":3200,"height":2048}],"genre":"posts","keywords":"performance, xpp","wordcount":724,"url":"https:\/\/dynamics365.github.io\/2015-02-12-x-performance-tips\/","datePublished":"2015-02-12T00:00:00+00:00","dateModified":"2015-02-12T00:00:00+00:00","publisher":{"@type":"Organization","name":"xxxx","logo":{"@type":"ImageObject","url":"https:\/\/dynamics365.github.io\/images\/avatar.png","width":528,"height":560}},"author":{"@type":"Person","name":"Max Nguyen"},"description":"X++ Performance tips"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3534873375492458" crossorigin=anonymous></script><a href=/ title="Dynamics 365 Finance & Operations | nuxulu.com"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/Icon/favicon-32x32.png data-srcset="/Icon/favicon-32x32.png, /Icon/favicon-32x32.png 1.5x, /Icon/favicon-32x32.png 2x" data-sizes=auto alt=/Icon/favicon-32x32.png title=/Icon/favicon-32x32.png><span class=header-title-pre> </span>Dynamics 365 Finance & Operations (Archive)</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=/finopsnews/>D365 Feed </a><a class=menu-item href=/erd/default.htm>AX ERD </a><a class=menu-item href=/posts/index.xml>RSS </a><a class=menu-item href=/lab/>Labs </a><a class=menu-item href=/about/>About me </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3534873375492458" crossorigin=anonymous></script><a href=/ title="Dynamics 365 Finance & Operations | nuxulu.com"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/Icon/favicon-32x32.png data-srcset="/Icon/favicon-32x32.png, /Icon/favicon-32x32.png 1.5x, /Icon/favicon-32x32.png 2x" data-sizes=auto alt=/Icon/favicon-32x32.png title=/Icon/favicon-32x32.png><span class=header-title-pre> </span>Dynamics 365 Finance & Operations (Archive)</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/finopsnews/ title>D365 Feed</a><a class=menu-item href=/erd/default.htm title>AX ERD</a><a class=menu-item href=/posts/index.xml title>RSS</a><a class=menu-item href=/lab/ title>Labs</a><a class=menu-item href=/about/ title>About me</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">X++ Performance tips</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/about/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Max Nguyen</a></span>&nbsp;<span class=post-category>included in <a href=/categories/ax2012/><i class="far fa-folder fa-fw" aria-hidden=true></i>AX2012</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime="February 12, 2015">February 12, 2015</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;724 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;4 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#tip-1-measure-execution-time-of-your-code>Tip 1: Measure execution time of your code</a></li><li><a href=#tip-2-limit-the-number-of-loops>Tip 2: limit the number of loops</a></li><li><a href=#tip-3-avoid-if-in-while-select>Tip 3: avoid <code>if</code> in <code>while select</code></a></li><li><a href=#tip-4-avoid-double-use-of-table-methods>Tip 4: avoid double use of table methods</a></li><li><a href=#tip-5-dont-put-too-much-code-on-tables>Tip 5: Don’t put too much code on tables</a></li><li><a href=#tip-6-use-the-fastest-code>Tip 6: Use the fastest code</a></li><li><a href=#tip-7-every-optimization-counts>Tip 7: Every optimization counts</a></li></ul></li></ul></nav></div></div><div class=content id=content><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fas fa-exclamation-triangle fa-fw" aria-hidden=true></i>Ref<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Report from <a href=http://www.artofcreation.be/ target=_blank rel="noopener noreffer">http://www.artofcreation.be/</a></div></div></div><h3 id=tip-1-measure-execution-time-of-your-code>Tip 1: Measure execution time of your code</h3><p>Measuring is knowing. Before you start changing code, make sure you have a set of data you can keep reusing for your tests. Measure the performance of your code on that data after each change in code so you know the impact of your changes.</p><p>One way to do this is by using the <code>Winapi::getTickCount()</code> or <code>WinApiServer::getTickCount()</code> if your code runs on server method.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=kd>static</span> <span class=k>void</span> <span class=n>KlForTickCountSample</span><span class=p>(</span><span class=n>Args</span> <span class=n>_args</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>ticks</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// get the tickcount before the process starts</span>
</span></span><span class=line><span class=cl>    <span class=n>ticks</span> <span class=p>=</span> <span class=n>winapi</span><span class=p>::</span><span class=n>getTickCount</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// start the process</span>
</span></span><span class=line><span class=cl>    <span class=n>sleep</span><span class=p>(</span><span class=m>2000</span><span class=p>);</span> <span class=c1>// simulate 2 seconds of processing</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// compare tickcount</span>
</span></span><span class=line><span class=cl>    <span class=n>ticks</span> <span class=p>=</span> <span class=n>winapi</span><span class=p>::</span><span class=n>getTickCount</span><span class=p>()</span> <span class=err>–</span> <span class=n>ticks</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// display result</span>
</span></span><span class=line><span class=cl>    <span class=n>info</span><span class=p>(</span><span class=n>strfmt</span><span class=p>(</span><span class=err>&#39;</span><span class=n>Number</span> <span class=n>of</span> <span class=n>ticks</span><span class=p>:</span> <span class=p>%</span><span class=m>1</span><span class=err>&#39;</span><span class=p>,</span> <span class=n>ticks</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=tip-2-limit-the-number-of-loops>Tip 2: limit the number of loops</h3><p>A LOT of time goes into loops. If you have a performance problem, start looking for loops. Code can run really fast, but it can get slow when it is executed too many time, eg, in a loop.</p><h3 id=tip-3-avoid-if-in-while-select>Tip 3: avoid <code>if</code> in <code>while select</code></h3><p>When there is a <code>if</code> in a <code>while select</code>, see if you can rewrite it a a where statement in your select. Don’t be affraid use a join either. Consider the following example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=kd>static</span> <span class=k>void</span> <span class=n>KlForIfInLoop</span><span class=p>(</span><span class=n>Args</span> <span class=n>_args</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>VendTable</span> <span class=n>vendTable</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// usually slower</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=k>select</span> <span class=n>vendTable</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>vendTable</span><span class=p>.</span><span class=n>VendGroup</span> <span class=p>==</span> <span class=err>&#39;</span><span class=n>VG1</span><span class=err>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>info</span><span class=p>(</span><span class=n>vendTable</span><span class=p>.</span><span class=n>AccountNum</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// usually faster</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=k>select</span> <span class=n>vendTable</span>
</span></span><span class=line><span class=cl>    <span class=k>where</span> <span class=n>vendTable</span><span class=p>.</span><span class=n>VendGroup</span> <span class=p>==</span> <span class=err>&#39;</span><span class=n>VG1</span><span class=err>&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>info</span><span class=p>(</span><span class=n>vendTable</span><span class=p>.</span><span class=n>AccountNum</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=tip-4-avoid-double-use-of-table-methods>Tip 4: avoid double use of table methods</h3><p>Using table methods a lot can get really slow if you do it wrong. Consider the following example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=kd>static</span> <span class=k>void</span> <span class=n>klForTableMethodsSlow</span><span class=p>(</span><span class=n>Args</span> <span class=n>_args</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>SalesLine</span> <span class=n>salesLine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>InventDim</span> <span class=n>inventDim</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// select a salesline</span>
</span></span><span class=line><span class=cl>    <span class=k>select</span> <span class=n>firstonly</span> <span class=n>salesLine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>inventDim</span><span class=p>.</span><span class=n>InventColorId</span> <span class=p>=</span> <span class=n>salesLine</span><span class=p>.</span><span class=n>inventDim</span><span class=p>().</span><span class=n>InventColorId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>inventDim</span><span class=p>.</span><span class=n>InventSizeId</span>  <span class=p>=</span> <span class=n>salesLine</span><span class=p>.</span><span class=n>inventDim</span><span class=p>().</span><span class=n>InventSizeId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>inventDim</span><span class=p>.</span><span class=n>inventBatchId</span> <span class=p>=</span> <span class=n>salesLine</span><span class=p>.</span><span class=n>inventDim</span><span class=p>().</span><span class=n>inventBatchId</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>This example code looks nice, but there’s a problem. <code>The salesLine.inventDim()</code> method contains the following:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=n>InventDim</span> <span class=n>inventDim</span><span class=p>(</span><span class=n>boolean</span>  <span class=n>_forUpdate</span> <span class=p>=</span> <span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>InventDim</span><span class=p>::</span><span class=n>find</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=n>InventDimId</span><span class=p>,</span> <span class=n>_forUpdate</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>This means that the <code>invendDim</code> record is read three times from the database. It is better to declare the <code>inventDim</code> record locally and only retrieve it once:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=kd>static</span> <span class=k>void</span> <span class=n>klForTableMethodsFast</span><span class=p>(</span><span class=n>Args</span> <span class=n>_args</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>SalesLine</span> <span class=n>salesLine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>InventDim</span> <span class=n>inventDim</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>InventDim</span> <span class=n>inventDimLoc</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// select a salesline</span>
</span></span><span class=line><span class=cl>    <span class=k>select</span> <span class=n>firstonly</span> <span class=n>salesLine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>inventDimLoc</span> <span class=p>=</span> <span class=n>salesLine</span><span class=p>.</span><span class=n>inventDim</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>inventDim</span><span class=p>.</span><span class=n>InventColorId</span> <span class=p>=</span> <span class=n>inventDimLoc</span><span class=p>.</span><span class=n>InventColorId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>inventDim</span><span class=p>.</span><span class=n>InventSizeId</span>  <span class=p>=</span> <span class=n>inventDimLoc</span><span class=p>.</span><span class=n>InventSizeId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>inventDim</span><span class=p>.</span><span class=n>inventBatchId</span> <span class=p>=</span> <span class=n>inventDimLoc</span><span class=p>.</span><span class=n>inventBatchId</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=tip-5-dont-put-too-much-code-on-tables>Tip 5: Don’t put too much code on tables</h3><p>Code on tables is usually fast, but things can get slow if you use it to much. Say you have a table with an <code>InventDimId</code> field. If you have 5 methods that need the <code>InventDim</code> record, because you don’t have a classDeclaration method on your table, you need to call this function 5 times, once in every method:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=n>InventDim</span><span class=p>::</span><span class=n>find</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=n>inventDim</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>When you put these methods on a class, you could optimise it by fetching the record only once and storing it in the <code>classDeclaration</code>, or better, passing it as a parameter to your methods. An other example is fetching parameters from parameter tables, eg <code>InventParameters::find()</code>. On a table, you have to fetch it each time you call a method. In a class, you would probably optimize your code to only fetch the parameter record once.</p><h3 id=tip-6-use-the-fastest-code>Tip 6: Use the fastest code</h3><p>For some tasks, there is <strong>special code</strong> that is faster than the code you would normally write. For example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=c1>// slower</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=k>select</span> <span class=n>forupdate</span> <span class=n>custTable</span>
</span></span><span class=line><span class=cl><span class=k>where</span> <span class=n>custTable</span><span class=p>.</span><span class=n>custGroup</span> <span class=p>==</span> <span class=err>&#39;</span><span class=n>TST</span><span class=err>&#39;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>custTable</span><span class=p>.</span><span class=n>delete</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>// faster</span>
</span></span><span class=line><span class=cl><span class=n>delete_from</span> <span class=n>custTable</span>
</span></span><span class=line><span class=cl><span class=k>where</span> <span class=n>custTable</span><span class=p>.</span><span class=n>custGroup</span> <span class=p>==</span> <span class=err>&#39;</span><span class=n>TST</span><span class=err>&#39;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>The same applies to update_recordset for updating records. Also, when adding values to the end of a container</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=n>cont</span> <span class=p>+=</span> <span class=s>&#34;a value&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>is faster than</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=n>cont</span> <span class=p>=</span> <span class=n>conins</span><span class=p>(</span><span class=n>cont</span><span class=p>,</span> <span class=n>conlen</span><span class=p>(</span><span class=n>cont</span><span class=p>),</span> <span class=s>&#34;a value&#34;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=tip-7-every-optimization-counts>Tip 7: Every optimization counts</h3><p>Remember that every optimization you do to you code counts, even if it’s a little one. Small performance tweaks can have a huge effect once you process large quantities of data. So don’t be lazy, and optimize.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on February 12, 2015</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/2015-02-12-x-performance-tips/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://dynamics365.github.io/2015-02-12-x-performance-tips/ data-title="X++ Performance tips" data-hashtags=performance,xpp><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://dynamics365.github.io/2015-02-12-x-performance-tips/ data-hashtag=performance><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://dynamics365.github.io/2015-02-12-x-performance-tips/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://dynamics365.github.io/2015-02-12-x-performance-tips/ data-title="X++ Performance tips" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://dynamics365.github.io/2015-02-12-x-performance-tips/ data-title="X++ Performance tips"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://dynamics365.github.io/2015-02-12-x-performance-tips/ data-title="X++ Performance tips"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://dynamics365.github.io/2015-02-12-x-performance-tips/ data-title="X++ Performance tips"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/performance/>Performance</a>,&nbsp;<a href=/tags/xpp/>Xpp</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/2015-02-04-create-and-write-to-xml-file-in-dynamics-ax/ class=prev rel=prev title="Create and write to XML file in Dynamics AX"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Create and write to XML file in Dynamics AX</a>
<a href=/2015-05-08-infographic-tieu-tien-khon-ngoan-theo-quy-tac-6-chiec-lo/ class=next rel=next title="Infographic Tiêu tiền khôn ngoan theo quy tắc 6 chiếc lọ">Infographic Tiêu tiền khôn ngoan theo quy tắc 6 chiếc lọ<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=disqus_thread class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><a href=https://www.buymeacoffee.com/maxnguyen target=_blank><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a coffee&emoji=&slug=maxnguyen&button_colour=eacd61&font_colour=000000&font_family=Cookie&outline_colour=000000&coffee_colour=FFDD00"></a><br>The blog is in archive mode, please visit its new version <a href=https://automaly.com/>automaly</a></br></div><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.124.1">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2013 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/about/ target=_blank>Max Nguyen</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><script type=text/javascript src=https://https-dynamics365-github-io.disqus.com/embed.js defer></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:300},comment:{},lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"},twemoji:!0}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-57379422-3",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-57379422-3" async></script></body></html>