<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Getting onebox VHD Dynamics 365 finance and operations virtual machine - Dynamics 365 Finance & Operations | nuxulu.com</title><meta name=Description content="Dynamics 365 Finance & Operations"><meta property="og:title" content="Getting onebox VHD Dynamics 365 finance and operations virtual machine">
<meta property="og:description" content="1. Download Dynamics 365 finance and operations VHD files 2. Extend the Evaluattion license 3. Rename VM Update financial reporting Update the Azure Storage Emulator 4. Location of packages, source code, and other AOS configurations 5. Redeploying or restarting the runtime on the VM 6. Update to the latest version 7. For (VHD) that was released for versions 10.0.24 and later 7.1 Register a new application in Azure Active Directory 7."><meta property="og:type" content="article"><meta property="og:url" content="https://dynamics365.github.io/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/"><meta property="og:image" content="https://dynamics365.github.io/Icon/mstile-150x150.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-04-06T00:00:00+00:00"><meta property="article:modified_time" content="2022-10-08T00:00:00+00:00"><meta property="og:site_name" content="Dynamics 365 Finance & Operations"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dynamics365.github.io/Icon/mstile-150x150.png"><meta name=twitter:title content="Getting onebox VHD Dynamics 365 finance and operations virtual machine"><meta name=twitter:description content="1. Download Dynamics 365 finance and operations VHD files 2. Extend the Evaluattion license 3. Rename VM Update financial reporting Update the Azure Storage Emulator 4. Location of packages, source code, and other AOS configurations 5. Redeploying or restarting the runtime on the VM 6. Update to the latest version 7. For (VHD) that was released for versions 10.0.24 and later 7.1 Register a new application in Azure Active Directory 7."><meta name=application-name content="Dynamics 365 Finance & Operations"><meta name=apple-mobile-web-app-title content="Dynamics 365 Finance & Operations"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=/Icon/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://dynamics365.github.io/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/><link rel=prev href=https://dynamics365.github.io/2020-04-05-azure-storage-emulator-port-conflict-with-existing-application/><link rel=next href=https://dynamics365.github.io/2020-05-10-database-sync-after-data-type-on-field-has-been-changed/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><meta name=google-site-verification content="f08c47fec0942fa0"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Getting onebox VHD Dynamics 365 finance and operations virtual machine","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/dynamics365.github.io\/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine\/"},"image":[{"@type":"ImageObject","url":"https:\/\/dynamics365.github.io\/images\/Apple-Devices-Preview.png","width":3200,"height":2048}],"genre":"posts","keywords":"onebox vhd, Dynamics 365 finance and operations, upgrade, LCS, OneBox","wordcount":1085,"url":"https:\/\/dynamics365.github.io\/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine\/","datePublished":"2020-04-06T00:00:00+00:00","dateModified":"2022-10-08T00:00:00+00:00","publisher":{"@type":"Organization","name":"xxxx","logo":{"@type":"ImageObject","url":"https:\/\/dynamics365.github.io\/images\/avatar.png","width":528,"height":560}},"author":{"@type":"Person","name":"Max Nguyen"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3534873375492458" crossorigin=anonymous></script><a href=/ title="Dynamics 365 Finance & Operations | nuxulu.com"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/Icon/favicon-32x32.png data-srcset="/Icon/favicon-32x32.png, /Icon/favicon-32x32.png 1.5x, /Icon/favicon-32x32.png 2x" data-sizes=auto alt=/Icon/favicon-32x32.png title=/Icon/favicon-32x32.png><span class=header-title-pre> </span>Dynamics 365 Finance & Operations</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=/finopsnews/>D365 Feed </a><a class=menu-item href=/erd/default.htm>AX ERD </a><a class=menu-item href=/posts/index.xml>RSS </a><a class=menu-item href=/lab/>Labs </a><a class=menu-item href=/about/>About me </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3534873375492458" crossorigin=anonymous></script><a href=/ title="Dynamics 365 Finance & Operations | nuxulu.com"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/Icon/favicon-32x32.png data-srcset="/Icon/favicon-32x32.png, /Icon/favicon-32x32.png 1.5x, /Icon/favicon-32x32.png 2x" data-sizes=auto alt=/Icon/favicon-32x32.png title=/Icon/favicon-32x32.png><span class=header-title-pre> </span>Dynamics 365 Finance & Operations</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/finopsnews/ title>D365 Feed</a><a class=menu-item href=/erd/default.htm title>AX ERD</a><a class=menu-item href=/posts/index.xml title>RSS</a><a class=menu-item href=/lab/ title>Labs</a><a class=menu-item href=/about/ title>About me</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Getting onebox VHD Dynamics 365 finance and operations virtual machine</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/about/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Max Nguyen</a></span>&nbsp;<span class=post-category>included in <a href=/categories/finops/><i class="far fa-folder fa-fw" aria-hidden=true></i>FinOps</a>&nbsp;<a href=/categories/troubleshooting/><i class="far fa-folder fa-fw" aria-hidden=true></i>Troubleshooting</a>&nbsp;<a href=/categories/onebox/><i class="far fa-folder fa-fw" aria-hidden=true></i>Onebox</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime="April 6, 2020">April 6, 2020</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1085 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;6 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1-download-dynamics-365-finance-and-operations-vhd-files>1. Download Dynamics 365 finance and operations VHD files</a></li><li><a href=#2-extend-the-evaluattion-license>2. Extend the Evaluattion license</a></li><li><a href=#3-rename-vm>3. Rename VM</a><ul><li><a href=#update-financial-reporting>Update financial reporting</a></li><li><a href=#update-the-azure-storage-emulator>Update the Azure Storage Emulator</a></li></ul></li><li><a href=#4-location-of-packages-source-code-and-other-aos-configurations>4. Location of packages, source code, and other AOS configurations</a></li><li><a href=#5-redeploying-or-restarting-the-runtime-on-the-vm>5. Redeploying or restarting the runtime on the VM</a></li><li><a href=#6-update-to-the-latest-version>6. Update to the latest version</a></li><li><a href=#7-for-vhd-that-was-released-for-versions-10024-and-later>7. For (VHD) that was released for versions 10.0.24 and later</a><ul><li><a href=#71-register-a-new-application-in-azure-active-directory>7.1 Register a new application in Azure Active Directory</a></li><li><a href=#72-run-the-setup-script>7.2 Run the setup script</a></li></ul></li></ul></nav></div></div><div class=content id=content><ul><li><a href=#1-download-dynamics-365-finance-and-operations-vhd-files rel>1. Download Dynamics 365 finance and operations VHD files</a></li><li><a href=#2-extend-the-evaluattion-license rel>2. Extend the Evaluattion license</a></li><li><a href=#3-rename-vm rel>3. Rename VM</a><ul><li><a href=#update-financial-reporting rel>Update financial reporting</a></li><li><a href=#update-the-azure-storage-emulator rel>Update the Azure Storage Emulator</a></li></ul></li><li><a href=#4-location-of-packages-source-code-and-other-aos-configurations rel>4. Location of packages, source code, and other AOS configurations</a></li><li><a href=#5-redeploying-or-restarting-the-runtime-on-the-vm rel>5. Redeploying or restarting the runtime on the VM</a></li><li><a href=#6-update-to-the-latest-version rel>6. Update to the latest version</a></li><li><a href=#7-for-vhd-that-was-released-for-versions-10024-and-later rel>7. For (VHD) that was released for versions 10.0.24 and later</a><ul><li><a href=#71-register-a-new-application-in-azure-active-directory rel>7.1 Register a new application in Azure Active Directory</a></li><li><a href=#72-run-the-setup-script rel>7.2 Run the setup script</a></li></ul></li></ul><h2 id=1-download-dynamics-365-finance-and-operations-vhd-files>1. Download Dynamics 365 finance and operations VHD files</h2><ul><li><p>Go to the LCS main page and select <strong>Shared asset library</strong> or go to Shared Asset Library.</p></li><li><p>Select the asset type <strong>Downloadable VHD</strong>.</p></li><li><p>Find the VHD you are looking for based on the desired Finance and Operation version. The VHD is divided into multiple file parts that you need to download. For example, the asset files that start with &ldquo;VHD - 10.0.5&rdquo; are the different files you need in order to install version 10.0.5.</p></li><li><p>Download all files (parts) associated with the desired VHD to a local folder.</p></li><li><p>After the download is complete, run the executable file that you downloaded, accept the software license agreement, and choose a file path to extract the VHD to.</p></li><li><p>This creates a local VHD file that you can use to run a local virtual machine.</p></li><li><p>Sign in to the VM by using the following credentials:</p><ul><li>User name: <strong>Administrator</strong></li><li>Password: <strong>pass@word1</strong></li></ul></li><li><p>Provision the administrator user.</p></li></ul><div class="details admonition note open"><div class="details-summary admonition-title"><i class="icon fas fa-pencil-alt fa-fw" aria-hidden=true></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><p>For security reasons the reply URL setup for AAD was changed, The &ldquo;Admin user provisioning&rdquo; tool is deleted from 10.0.24 <strong>cloud hosted</strong> VM. More info here <a href=https://learn.microsoft.com/en-us/dynamics365/fin-ops-core/dev-itpro/dev-tools/access-instances#frequently-asked-questions target=_blank rel="noopener noreffer">https://learn.microsoft.com/en-us/dynamics365/fin-ops-core/dev-itpro/dev-tools/access-instances#frequently-asked-questions</a>.</p><p>You still have it in the VHD machine.</p></div></div></div><h2 id=2-extend-the-evaluattion-license>2. Extend the Evaluattion license</h2><ul><li>Run cmd with Admin right.</li><li>Run <code>slmgr -dli</code> to check the current period status.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cmd data-lang=cmd><span class=line><span class=cl>Name: Windows(R), ServerDatacenterEval edition
</span></span><span class=line><span class=cl>Description: Windows(R) Operating System, TIMEBASED_EVAL channel
</span></span><span class=line><span class=cl>Partial Product Key: H6F8M
</span></span><span class=line><span class=cl>License Status: Licensed
</span></span><span class=line><span class=cl>Timebased activation expiration: 259199 minute(s) (180 day(s))
</span></span></code></pre></td></tr></table></div></div><ul><li>Run <code>slmgr –rearm</code> to extend the evaluation period.</li><li>Run <code>slmgr –dlv</code> to see how many extensions do you have left. You can only extend the license a limited number of times.</li></ul><h2 id=3-rename-vm>3. Rename VM</h2><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw" aria-hidden=true></i>Update<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><p>From the VHD 10.0.29 version, the VHD name named with the version of it own, before that the computer name always <strong>MININT-F36S5EH</strong>. So we don&rsquo;t have to remane the VM everytime we deploy a new VHD.<figure><a class=lightgallery href=/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/DVHD10029.png title="VHD 10.0.29" data-thumbnail=/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/DVHD10029.png data-sub-html="<h2>VHD 10.0.29</h2><p>VHD 10.0.29</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/DVHD10029.png data-srcset="/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/DVHD10029.png, /2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/DVHD10029.png 1.5x, /2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/DVHD10029.png 2x" data-sizes=auto alt=/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/DVHD10029.png width=524 height=277></a><figcaption class=image-caption>VHD 10.0.29</figcaption></figure></p></div></div></div><ul><li><p>Rename and restart the machine before you start development or connect to Azure DevOps.</p></li><li><p>Update the server name in SQL Server</p><ul><li>The default credential for SQL server is <strong>axdbadmin</strong> and password <strong>AOSWebSite@12</strong></li></ul></li></ul><p>You can also see the password (<code>DataAccess.AxAdminSqlPwd</code>) in the <code>C:\AOSService\webroot\web.config</code></p><p>To decrypt run this command:
<code>C:\AOSService\webroot\bin\Microsoft.Dynamics.AX.Framework.ConfigEncryptor.exe -decrypt C:\AOSService\webroot\web.config</code></p><p>To encrypt run this command:
<code>C:\AOSService\webroot\bin\Microsoft.Dynamics.AX.Framework.ConfigEncryptor.exe -encrypt C:\AOSService\webroot\web.config</code></p><p>If you see the error</p><p><div class="details admonition failure open"><div class="details-summary admonition-title"><i class="icon fas fa-times-circle fa-fw" aria-hidden=true></i>Failure<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>No certificate found for id &lsquo;7366E25DC94FA8A400FA0037FFF3BB300D9482D4&rsquo;</div></div></div>Please follow <a href=#7-for-vhd-that-was-released-for-versions-10024-and-later rel>this step</a> first.</p><ul><li><p>Run following query</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--MININT-57EHFHJ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>sp_dropserver</span><span class=w> </span><span class=p>[</span><span class=n>old_name</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>sp_addserver</span><span class=w> </span><span class=p>[</span><span class=n>new_name</span><span class=p>],</span><span class=w> </span><span class=k>local</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li></ul><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw" aria-hidden=true></i>Tip<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>In these commands, be sure to replace old_name with the old name of the server and new_name with the new name. By default, the old name is <code>MININT-F36S5EH</code>, but you can run select @@servername to get the old name. Additionally, be sure to restart the SQL Server service after the commands have finished running.</div></div></div><ul><li><p>Restart SQL service</p></li><li><p>Open Reporting Services Configuration Manager for SQL Server 2016, then <strong>Select Database</strong>, select <strong>Change Database</strong>, and use the new server name.</p></li></ul><h3 id=update-financial-reporting>Update financial reporting</h3><p>Go to LCS portal and download a one version package, we will need the scripts from it. Open a Microsoft Windows PowerShell command window as an admin, and run the following command. This command contains the default passwords that might have to be updated. Be sure to replace <strong>new_name</strong> with the new name.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=nb>cd </span><span class=p>&lt;</span><span class=n>update</span> <span class=n>folder</span><span class=p>&gt;\</span><span class=n>MROneBox</span><span class=p>\</span><span class=n>Scripts</span><span class=p>\</span><span class=n>Update</span>
</span></span><span class=line><span class=cl><span class=p>.\</span><span class=n>ConfigureMRDatabase</span><span class=p>.</span><span class=py>ps1</span> <span class=n>-NewAosDatabaseName</span> <span class=n>AxDB</span> <span class=n>-NewAosDatabaseServerName</span> <span class=n>new_name</span> <span class=n>-NewMRDatabaseName</span> <span class=n>ManagementReporter</span> <span class=n>-NewAxAdminUserPassword</span> <span class=n>AOSWebSite</span><span class=nv>@123</span> <span class=n>-NewMRAdminUserName</span> <span class=n>MRUser</span> <span class=n>-NewMRAdminUserPassword</span> <span class=n>MRWebSite</span><span class=nv>@123</span> <span class=n>-NewMRRuntimeUserName</span> <span class=n>MRUSer</span> <span class=n>-NewMRRuntimeUserPassword</span> <span class=n>MRWebSite</span><span class=nv>@123</span> <span class=n>-NewAxMRRuntimeUserName</span> <span class=n>MRUser</span> <span class=n>-NewAxMRRuntimeUserPassword</span> <span class=n>MRWebSite</span><span class=nv>@123</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=update-the-azure-storage-emulator>Update the Azure Storage Emulator</h3><ul><li><p>From the Start menu, open Microsoft Azure Storage Emulator - v4.0, and run the following commands.</p><p><code>AzureStorageEmulator.exe start</code></p><blockquote><p>If you got an error <strong><em>Port conflict with existing application</em></strong>, please check this <a href=/2020-04-05-azure-storage-emulator-port-conflict-with-existing-application/ rel>post</a>.</p></blockquote></li><li><p>This command verifies that the emulator is running.</p><p><code>AzureStorageEmulator.exe status</code></p></li><li><p>Update the server name</p><p><code>AzureStorageEmulator.exe init -server new_name</code></p><p>For more information about Azure storage emulator please follow <a href=https://docs.microsoft.com/en-us/azure/storage/common/storage-use-emulator target=_blank rel="noopener noreffer">https://docs.microsoft.com/en-us/azure/storage/common/storage-use-emulator</a></p></li></ul><h2 id=4-location-of-packages-source-code-and-other-aos-configurations>4. Location of packages, source code, and other AOS configurations</h2><p>On a VM, you can find most of the application configuration by opening the web.config file of AOSWebApplication.</p><ol><li><p>Start IIS.</p></li><li><p>Go to <em>Sites > AOSWebApplication</em>.</p></li><li><p>Right-click, and then click <strong>Explore</strong> to open File Explorer.</p></li><li><p>Open the <strong>web.config</strong> file in Notepad or another text editor. The following keys are of interest to many developers and administrators:</p><ul><li><p><strong>Aos.MetadataDirectory</strong> – This key points to the location of the packages folder that contains platform and application binaries, and also source code. (Source code is available only in development environments.) Typical values are: <code>c:\packages</code>, <code>c:\AosServicePackagesLocalDirectory</code>, and <code>J:AosServicePackagesLocalDirectory</code>.</p></li><li><p><strong>DataAccess.Database</strong> – This key holds the name of the database.</p></li><li><p><strong>Aos.AppRoot</strong> – This key points to the root folder of the Application Object Server (AOS) web application.</p></li></ul></li></ol><h2 id=5-redeploying-or-restarting-the-runtime-on-the-vm>5. Redeploying or restarting the runtime on the VM</h2><p>To restart the local runtime and redeploy all the packages, follow these steps.</p><ol><li><p>Open File Explorer, and go to <code>C:\CustomerServiceUnit</code>.</p></li><li><p>Right-click <strong>AOSDeploy.cmd</strong>, and then click <strong>Run as administrator</strong>.</p></li></ol><p>This process might take a while. The process is completed when the cmd.exe window closes. If you just want to restart AOS (without redeploying the runtime), run iisreset from an administrator Command Prompt window, or restart AOSWebApplication from IIS.</p><h2 id=6-update-to-the-latest-version>6. Update to the latest version</h2><p>Please check this <a href=https://docs.microsoft.com/en-us/dynamics365/fin-ops-core/dev-itpro/deployment/install-deployable-package target=_blank rel="noopener noreffer">document</a> for versions 10.0.24</p><h2 id=7-for-vhd-that-was-released-for-versions-10024-and-later>7. For (VHD) that was released for versions 10.0.24 and later</h2><h3 id=71-register-a-new-application-in-azure-active-directory>7.1 Register a new application in Azure Active Directory</h3><p>To register a new application in Microsoft Azure Active Directory (Azure AD), follow the steps outlined in <a href=https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app target=_blank rel="noopener noreffer">Register app or web API</a>. The new app registration should be for a web application, and the following redirect URIs should be added:</p><ul><li><code>https://usnconeboxax1aos.cloud.onebox.dynamics.com/</code></li><li><code>https://usnconeboxax1aos.cloud.onebox.dynamics.com/oauth/</code></li></ul><p>Once created, make note of the <strong>Application (client) ID</strong>.</p><h3 id=72-run-the-setup-script>7.2 Run the setup script</h3><p>After you sign in with the <strong>Administrator</strong> account, right-click the desktop shortcut <strong>Generate Self-Signed Certificates</strong>, and select <strong>Run as administrator</strong>. When the script prompts for the application ID, provide the <strong>Application (client) ID</strong> created in Azure Active Directory.</p><p>When the script finishes, the environment is ready for use. At this time, you can run the Admin Provisioning tool to set the administrator account, permissions, and tenant. Make sure that the email provided is for the Azure Active Directory tenant in which the application registration was created.</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fas fa-info-circle fa-fw" aria-hidden=true></i>Reference<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><a href=https://learn.microsoft.com/en-us/dynamics365/fin-ops-core/dev-itpro/migration-upgrade/vso-machine-renaming target=_blank rel="noopener noreffer">https://learn.microsoft.com/en-us/dynamics365/fin-ops-core/dev-itpro/migration-upgrade/vso-machine-renaming</a></div></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on October 8, 2022</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://dynamics365.github.io/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/ data-title="Getting onebox VHD Dynamics 365 finance and operations virtual machine" data-hashtags="onebox vhd,Dynamics 365 finance and operations,upgrade,LCS,OneBox"><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://dynamics365.github.io/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/ data-hashtag="onebox vhd"><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://dynamics365.github.io/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://dynamics365.github.io/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/ data-title="Getting onebox VHD Dynamics 365 finance and operations virtual machine" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://dynamics365.github.io/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/ data-title="Getting onebox VHD Dynamics 365 finance and operations virtual machine"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://dynamics365.github.io/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/ data-title="Getting onebox VHD Dynamics 365 finance and operations virtual machine"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://dynamics365.github.io/2020-04-06-getting-onebox-vhd-dynamics-365-finance-and-operations-virtual-machine/ data-title="Getting onebox VHD Dynamics 365 finance and operations virtual machine"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/onebox-vhd/>onebox vhd</a>,&nbsp;<a href=/tags/dynamics-365-finance-and-operations/>Dynamics 365 finance and operations</a>,&nbsp;<a href=/tags/upgrade/>Upgrade</a>,&nbsp;<a href=/tags/lcs/>LCS</a>,&nbsp;<a href=/tags/onebox/>OneBox</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/2020-04-05-azure-storage-emulator-port-conflict-with-existing-application/ class=prev rel=prev title="Azure Storage Emulator 'Port conflict with existing application', Dynamics 365 finance and operations"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Azure Storage Emulator 'Port conflict with existing application', Dynamics 365 finance and operations</a>
<a href=/2020-05-10-database-sync-after-data-type-on-field-has-been-changed/ class=next rel=next title="Database Sync after data type on field has been changed">Database Sync after data type on field has been changed<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=disqus_thread class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><a href=https://www.buymeacoffee.com/maxnguyen target=_blank><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a coffee&emoji=&slug=maxnguyen&button_colour=eacd61&font_colour=000000&font_family=Cookie&outline_colour=000000&coffee_colour=FFDD00"></a></div><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.121.1">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2013 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/about/ target=_blank>Max Nguyen</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><script type=text/javascript src=https://https-dynamics365-github-io.disqus.com/embed.js defer></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:300},comment:{},lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"},twemoji:!0}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-57379422-3",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-57379422-3" async></script></body></html>